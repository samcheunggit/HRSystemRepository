/**
 * @license Angular v4.4.1
 * (c) 2010-2017 Google, Inc. https://angular.io/
 * License: MIT
 */
!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("@angular/core"),require("@angular/platform-browser"),require("@angular/common"),require("rxjs/observable/of"),require("rxjs/operator/concatMap"),require("rxjs/operator/filter"),require("rxjs/operator/map"),require("rxjs/Observable"),require("@angular/compiler"),require("@angular/http"),require("@angular/platform-browser/animations"),require("rxjs/Subject"),require("url"),require("rxjs/operator/first"),require("rxjs/operator/toPromise")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/platform-browser","@angular/common","rxjs/observable/of","rxjs/operator/concatMap","rxjs/operator/filter","rxjs/operator/map","rxjs/Observable","@angular/compiler","@angular/http","@angular/platform-browser/animations","rxjs/Subject","url","rxjs/operator/first","rxjs/operator/toPromise"],factory):factory((global.ng=global.ng||{},global.ng.platformServer=global.ng.platformServer||{}),global.ng.core,global.ng.platformBrowser,global.ng.common,global.rxjs_observable_of,global.rxjs_operator_concatMap,global.Rx.Observable.prototype,global.rxjs_operator_map,global.Rx,global.ng.compiler,global._angular_http,global._angular_platformBrowser_animations,global.Rx,global.url,global.Rx.Observable.prototype,global.Rx.Observable.prototype)}(this,function(exports,_angular_core,_angular_platformBrowser,_angular_common,rxjs_observable_of,rxjs_operator_concatMap,rxjs_operator_filter,rxjs_operator_map,rxjs_Observable,_angular_compiler,_angular_http,_angular_platformBrowser_animations,rxjs_Subject,url,rxjs_operator_first,rxjs_operator_toPromise){"use strict";function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}function __extends$1(d,b){function __(){this.constructor=d}extendStatics$1(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}function sequence(steps,options){return void 0===options&&(options=null),{type:2,steps:steps,options:options}}function style(tokens){return{type:6,styles:tokens,offset:null}}/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 * @param {?} cb
 * @return {?}
 */
function scheduleMicroTask$1(cb){Promise.resolve(null).then(cb)}/**
 * @license Angular v4.3.6
 * (c) 2010-2017 Google, Inc. https://angular.io/
 * License: MIT
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function optimizeGroupPlayer(players){switch(players.length){case 0:return new NoopAnimationPlayer;case 1:return players[0];default:return new AnimationGroupPlayer(players)}}function normalizeKeyframes(driver,normalizer,element,keyframes$$1,preStyles,postStyles){void 0===preStyles&&(preStyles={}),void 0===postStyles&&(postStyles={});var errors=[],normalizedKeyframes=[],previousOffset=-1,previousKeyframe=null;if(keyframes$$1.forEach(function(kf){var offset=kf.offset,isSameOffset=offset==previousOffset,normalizedKeyframe=isSameOffset&&previousKeyframe||{};Object.keys(kf).forEach(function(prop){var normalizedProp=prop,normalizedValue=kf[prop];if("offset"!==prop)switch(normalizedProp=normalizer.normalizePropertyName(normalizedProp,errors),normalizedValue){case ɵPRE_STYLE:normalizedValue=preStyles[prop];break;case AUTO_STYLE:normalizedValue=postStyles[prop];break;default:normalizedValue=normalizer.normalizeStyleValue(prop,normalizedProp,normalizedValue,errors)}normalizedKeyframe[normalizedProp]=normalizedValue}),isSameOffset||normalizedKeyframes.push(normalizedKeyframe),previousKeyframe=normalizedKeyframe,previousOffset=offset}),errors.length){var LINE_START="\n - ";throw new Error("Unable to animate due to the following errors:"+LINE_START+errors.join(LINE_START))}return normalizedKeyframes}function listenOnPlayer(player,eventName,event,callback){switch(eventName){case"start":player.onStart(function(){return callback(event&&copyAnimationEvent(event,"start",player.totalTime))});break;case"done":player.onDone(function(){return callback(event&&copyAnimationEvent(event,"done",player.totalTime))});break;case"destroy":player.onDestroy(function(){return callback(event&&copyAnimationEvent(event,"destroy",player.totalTime))})}}function copyAnimationEvent(e,phaseName,totalTime){var event=makeAnimationEvent(e.element,e.triggerName,e.fromState,e.toState,phaseName||e.phaseName,void 0==totalTime?e.totalTime:totalTime),data=e._data;return null!=data&&(event._data=data),event}function makeAnimationEvent(element,triggerName,fromState,toState,phaseName,totalTime){return void 0===phaseName&&(phaseName=""),void 0===totalTime&&(totalTime=0),{element:element,triggerName:triggerName,fromState:fromState,toState:toState,phaseName:phaseName,totalTime:totalTime}}function getOrSetAsInMap(map$$1,key,defaultValue){var value;return map$$1 instanceof Map?(value=map$$1.get(key),value||map$$1.set(key,value=defaultValue)):(value=map$$1[key],value||(value=map$$1[key]=defaultValue)),value}function parseTimelineCommand(command){var separatorPos=command.indexOf(":"),id=command.substring(1,separatorPos),action=command.substr(separatorPos+1);return[id,action]}function resolveTimingValue(value){if("number"==typeof value)return value;var matches=value.match(/^(-?[\.\d]+)(m?s)/);return!matches||matches.length<2?0:_convertTimeValueToMS(parseFloat(matches[1]),matches[2])}function _convertTimeValueToMS(value,unit){switch(unit){case"s":return value*ONE_SECOND;default:return value}}function resolveTiming(timings,errors,allowNegativeValues){return timings.hasOwnProperty("duration")?timings:parseTimeExpression(timings,errors,allowNegativeValues)}function parseTimeExpression(exp,errors,allowNegativeValues){var duration,regex=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,delay=0,easing="";if("string"==typeof exp){var matches=exp.match(regex);if(null===matches)return errors.push('The provided timing value "'+exp+'" is invalid.'),{duration:0,delay:0,easing:""};duration=_convertTimeValueToMS(parseFloat(matches[1]),matches[2]);var delayMatch=matches[3];null!=delayMatch&&(delay=_convertTimeValueToMS(Math.floor(parseFloat(delayMatch)),matches[4]));var easingVal=matches[5];easingVal&&(easing=easingVal)}else duration=exp;if(!allowNegativeValues){var containsErrors=!1,startIndex=errors.length;duration<0&&(errors.push("Duration values below 0 are not allowed for this animation step."),containsErrors=!0),delay<0&&(errors.push("Delay values below 0 are not allowed for this animation step."),containsErrors=!0),containsErrors&&errors.splice(startIndex,0,'The provided timing value "'+exp+'" is invalid.')}return{duration:duration,delay:delay,easing:easing}}function copyObj(obj,destination){return void 0===destination&&(destination={}),Object.keys(obj).forEach(function(prop){destination[prop]=obj[prop]}),destination}function copyStyles(styles,readPrototype,destination){if(void 0===destination&&(destination={}),readPrototype)for(var prop in styles)destination[prop]=styles[prop];else copyObj(styles,destination);return destination}function setStyles(element,styles){element.style&&Object.keys(styles).forEach(function(prop){var camelProp=dashCaseToCamelCase(prop);element.style[camelProp]=styles[prop]})}function eraseStyles(element,styles){element.style&&Object.keys(styles).forEach(function(prop){var camelProp=dashCaseToCamelCase(prop);element.style[camelProp]=""})}function normalizeAnimationEntry(steps){return Array.isArray(steps)?1==steps.length?steps[0]:sequence(steps):steps}function validateStyleParams(value,options,errors){var params=options.params||{},matches=extractStyleParams(value);matches.length&&matches.forEach(function(varName){params.hasOwnProperty(varName)||errors.push("Unable to resolve the local animation param "+varName+" in the given list of values")})}function extractStyleParams(value){var params=[];if("string"==typeof value){for(var val=value.toString(),match=void 0;match=PARAM_REGEX.exec(val);)params.push(match[1]);PARAM_REGEX.lastIndex=0}return params}function interpolateParams(value,params,errors){var original=value.toString(),str=original.replace(PARAM_REGEX,function(_,varName){var localVal=params[varName];return params.hasOwnProperty(varName)||(errors.push("Please provide a value for the animation param "+varName),localVal=""),localVal.toString()});return str==original?value:str}function iteratorToArray(iterator){for(var arr=[],item=iterator.next();!item.done;)arr.push(item.value),item=iterator.next();return arr}function dashCaseToCamelCase(input){return input.replace(DASH_CASE_REGEXP,function(){for(var m=[],_i=0;_i<arguments.length;_i++)m[_i]=arguments[_i];return m[1].toUpperCase()})}function allowPreviousPlayerStylesMerge(duration,delay){return 0===duration||0===delay}/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function visitAnimationNode(visitor,node,context){switch(node.type){case 7:return visitor.visitTrigger(node,context);case 0:return visitor.visitState(node,context);case 1:return visitor.visitTransition(node,context);case 2:return visitor.visitSequence(node,context);case 3:return visitor.visitGroup(node,context);case 4:return visitor.visitAnimate(node,context);case 5:return visitor.visitKeyframes(node,context);case 6:return visitor.visitStyle(node,context);case 8:return visitor.visitReference(node,context);case 9:return visitor.visitAnimateChild(node,context);case 10:return visitor.visitAnimateRef(node,context);case 11:return visitor.visitQuery(node,context);case 12:return visitor.visitStagger(node,context);default:throw new Error("Unable to resolve animation metadata node #"+node.type)}}function parseTransitionExpr(transitionValue,errors){var expressions=[];return"string"==typeof transitionValue?transitionValue.split(/\s*,\s*/).forEach(function(str){return parseInnerTransitionStr(str,expressions,errors)}):expressions.push(transitionValue),expressions}function parseInnerTransitionStr(eventStr,expressions,errors){":"==eventStr[0]&&(eventStr=parseAnimationAlias(eventStr,errors));var match=eventStr.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==match||match.length<4)return errors.push('The provided transition expression "'+eventStr+'" is not supported'),expressions;var fromState=match[1],separator=match[2],toState=match[3];expressions.push(makeLambdaFromStates(fromState,toState));var isFullAnyStateExpr=fromState==ANY_STATE&&toState==ANY_STATE;"<"!=separator[0]||isFullAnyStateExpr||expressions.push(makeLambdaFromStates(toState,fromState))}function parseAnimationAlias(alias,errors){switch(alias){case":enter":return"void => *";case":leave":return"* => void";default:return errors.push('The transition alias value "'+alias+'" is not supported'),"* => *"}}function makeLambdaFromStates(lhs,rhs){return function(fromState,toState){var lhsMatch=lhs==ANY_STATE||lhs==fromState,rhsMatch=rhs==ANY_STATE||rhs==toState;return lhsMatch||"boolean"!=typeof fromState||(lhsMatch=fromState?"true"===lhs:"false"===lhs),rhsMatch||"boolean"!=typeof toState||(rhsMatch=toState?"true"===rhs:"false"===rhs),lhsMatch&&rhsMatch}}function buildAnimationAst(metadata,errors){return(new AnimationAstBuilderVisitor).build(metadata,errors)}function normalizeSelector(selector){var hasAmpersand=!!selector.split(/\s*,\s*/).find(function(token){return token==SELF_TOKEN});return hasAmpersand&&(selector=selector.replace(SELF_TOKEN_REGEX,"")),selector=selector.replace(ENTER_TOKEN_REGEX,ENTER_SELECTOR).replace(LEAVE_TOKEN_REGEX,LEAVE_SELECTOR).replace(/@\*/g,NG_TRIGGER_SELECTOR).replace(/@\w+/g,function(match){return NG_TRIGGER_SELECTOR+"-"+match.substr(1)}).replace(/:animating/g,NG_ANIMATING_SELECTOR),[selector,hasAmpersand]}function normalizeParams(obj){return obj?copyObj(obj):null}function consumeOffset(styles){if("string"==typeof styles)return null;var offset=null;if(Array.isArray(styles))styles.forEach(function(styleTuple){if(isObject(styleTuple)&&styleTuple.hasOwnProperty("offset")){var obj=styleTuple;offset=parseFloat(obj.offset),delete obj.offset}});else if(isObject(styles)&&styles.hasOwnProperty("offset")){var obj=styles;offset=parseFloat(obj.offset),delete obj.offset}return offset}function isObject(value){return!Array.isArray(value)&&"object"==typeof value}function constructTimingAst(value,errors){var timings=null;if(value.hasOwnProperty("duration"))timings=value;else if("number"==typeof value){resolveTiming(value,errors).duration;return new TimingAst(value,0,"")}var strValue=value,isDynamic=strValue.split(/\s+/).some(function(v){return"{"==v.charAt(0)&&"{"==v.charAt(1)});return isDynamic?new DynamicTimingAst(strValue):(timings=timings||resolveTiming(strValue,errors),new TimingAst(timings.duration,timings.delay,timings.easing))}function normalizeAnimationOptions(options){return options?(options=copyObj(options),options.params&&(options.params=normalizeParams(options.params))):options={},options}/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function createTimelineInstruction(element,keyframes$$1,preStyleProps,postStyleProps,duration,delay,easing,subTimeline){return void 0===easing&&(easing=null),void 0===subTimeline&&(subTimeline=!1),{type:1,element:element,keyframes:keyframes$$1,preStyleProps:preStyleProps,postStyleProps:postStyleProps,duration:duration,delay:delay,totalTime:duration+delay,easing:easing,subTimeline:subTimeline}}function buildAnimationTimelines(driver,rootElement,ast,startingStyles,finalStyles,options,subInstructions,errors){return void 0===startingStyles&&(startingStyles={}),void 0===finalStyles&&(finalStyles={}),void 0===errors&&(errors=[]),(new AnimationTimelineBuilderVisitor).buildKeyframes(driver,rootElement,ast,startingStyles,finalStyles,options,subInstructions,errors)}function roundOffset(offset,decimalPoints){void 0===decimalPoints&&(decimalPoints=3);var mult=Math.pow(10,decimalPoints-1);return Math.round(offset*mult)/mult}function flattenStyles(input,allStyles){var allProperties,styles={};return input.forEach(function(token){"*"===token?(allProperties=allProperties||Object.keys(allStyles),allProperties.forEach(function(prop){styles[prop]=AUTO_STYLE})):copyStyles(token,!1,styles)}),styles}function makeBooleanMap(keys){var map$$1={};return keys.forEach(function(key){return map$$1[key]=!0}),map$$1}/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function createTransitionInstruction(element,triggerName,fromState,toState,isRemovalTransition,fromStyles,toStyles,timelines,queriedElements,preStyleProps,postStyleProps,errors){return{type:0,element:element,triggerName:triggerName,isRemovalTransition:isRemovalTransition,fromState:fromState,fromStyles:fromStyles,toState:toState,toStyles:toStyles,timelines:timelines,queriedElements:queriedElements,preStyleProps:preStyleProps,postStyleProps:postStyleProps,errors:errors}}function oneOrMoreTransitionsMatch(matchFns,currentState,nextState){return matchFns.some(function(fn){return fn(currentState,nextState)})}/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function buildTrigger(name,ast){return new AnimationTrigger(name,ast)}function createFallbackTransition(triggerName,states){var matchers=[function(fromState,toState){return!0}],animation$$1=new SequenceAst([]),transition$$1=new TransitionAst(matchers,animation$$1);return new AnimationTransitionFactory(triggerName,transition$$1,states)}function balanceProperties(obj,key1,key2){obj.hasOwnProperty(key1)?obj.hasOwnProperty(key2)||(obj[key2]=obj[key1]):obj.hasOwnProperty(key2)&&(obj[key1]=obj[key2])}function deleteOrUnsetInMap(map$$1,key,value){var currentValues;if(map$$1 instanceof Map){if(currentValues=map$$1.get(key)){if(currentValues.length){var index=currentValues.indexOf(value);currentValues.splice(index,1)}0==currentValues.length&&map$$1.delete(key)}}else if(currentValues=map$$1[key]){if(currentValues.length){var index=currentValues.indexOf(value);currentValues.splice(index,1)}0==currentValues.length&&delete map$$1[key]}return currentValues}function normalizeTriggerValue(value){switch(typeof value){case"boolean":return value?"1":"0";default:return null!=value?value.toString():null}}function isElementNode(node){return node&&1===node.nodeType}function isTriggerEventValid(eventName){return"start"==eventName||"done"==eventName}function cloakElement(element,value){var oldValue=element.style.display;return element.style.display=null!=value?value:"none",oldValue}function cloakAndComputeStyles(driver,elements,elementPropsMap,defaultStyle){var cloakVals=elements.map(function(element){return cloakElement(element)}),valuesMap=new Map,failedElements=[];return elementPropsMap.forEach(function(props,element){var styles={};props.forEach(function(prop){var value=styles[prop]=driver.computeStyle(element,prop,defaultStyle);value&&0!=value.length||(element[REMOVAL_FLAG]=NULL_REMOVED_QUERIED_STATE,failedElements.push(element))}),valuesMap.set(element,styles)}),elements.forEach(function(element,i){return cloakElement(element,cloakVals[i])}),[valuesMap,failedElements]}function createIsRootFilterFn(nodes){var isRoot,nodeSet=new Set(nodes),knownRootContainer=new Set;return isRoot=function(node){return!node||!nodeSet.has(node.parentNode)&&(!!knownRootContainer.has(node.parentNode)||!!isRoot(node.parentNode)&&(knownRootContainer.add(node),!0))}}function containsClass(element,className){if(element.classList)return element.classList.contains(className);var classes=element[CLASSES_CACHE_KEY];return classes&&classes[className]}function addClass(element,className){if(element.classList)element.classList.add(className);else{var classes=element[CLASSES_CACHE_KEY];classes||(classes=element[CLASSES_CACHE_KEY]={}),classes[className]=!0}}function removeClass(element,className){if(element.classList)element.classList.remove(className);else{var classes=element[CLASSES_CACHE_KEY];classes&&delete classes[className]}}function getBodyNode(){return"undefined"!=typeof document?document.body:null}function removeNodesAfterAnimationDone(engine,element,players){optimizeGroupPlayer(players).onDone(function(){return engine.processLeaveNode(element)})}function flattenGroupPlayers(players){var finalPlayers=[];return _flattenGroupPlayersRecur(players,finalPlayers),finalPlayers}function _flattenGroupPlayersRecur(players,finalPlayers){for(var i=0;i<players.length;i++){var player=players[i];player instanceof AnimationGroupPlayer?_flattenGroupPlayersRecur(player.players,finalPlayers):finalPlayers.push(player)}}function objEquals(a,b){var k1=Object.keys(a),k2=Object.keys(b);if(k1.length!=k2.length)return!1;for(var i=0;i<k1.length;i++){var prop=k1[i];if(!b.hasOwnProperty(prop)||a[prop]!==b[prop])return!1}return!0}function replacePostStylesAsPre(element,allPreStyleElements,allPostStyleElements){var postEntry=allPostStyleElements.get(element);if(!postEntry)return!1;var preEntry=allPreStyleElements.get(element);return preEntry?postEntry.forEach(function(data){return preEntry.add(data)}):allPreStyleElements.set(element,postEntry),allPostStyleElements.delete(element),!0}function _computeStyle(element,prop){return window.getComputedStyle(element)[prop]}function paramParser(rawParams,codec){var map$$1=new Map;if(rawParams.length>0){var params=rawParams.split("&");params.forEach(function(param){var eqIdx=param.indexOf("="),_a=eqIdx==-1?[codec.decodeKey(param),""]:[codec.decodeKey(param.slice(0,eqIdx)),codec.decodeValue(param.slice(eqIdx+1))],key=_a[0],val=_a[1],list=map$$1.get(key)||[];list.push(val),map$$1.set(key,list)})}return map$$1}function standardEncoding(v){return encodeURIComponent(v).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function mightHaveBody(method){switch(method){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function isArrayBuffer(value){return"undefined"!=typeof ArrayBuffer&&value instanceof ArrayBuffer}function isBlob(value){return"undefined"!=typeof Blob&&value instanceof Blob}function isFormData(value){return"undefined"!=typeof FormData&&value instanceof FormData}/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function addBody(options,body){return{body:body,headers:options.headers,observe:options.observe,params:options.params,reportProgress:options.reportProgress,responseType:options.responseType,withCredentials:options.withCredentials}}function getResponseUrl(xhr){return"responseURL"in xhr&&xhr.responseURL?xhr.responseURL:/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())?xhr.getResponseHeader("X-Request-URL"):null}/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function interceptingHandler(backend,interceptors){return void 0===interceptors&&(interceptors=[]),interceptors?interceptors.reduceRight(function(next,interceptor){return new HttpInterceptorHandler(next,interceptor)},backend):backend}function validateRequestUrl(url$$1){if(!isAbsoluteUrl.test(url$$1))throw new Error("URLs requested via Http on the server must be absolute. URL: "+url$$1)}function httpFactory(xhrBackend,options){var macroBackend=new ZoneMacroTaskBackend(xhrBackend);return new _angular_http.Http(macroBackend,options)}function zoneWrappedInterceptingHandler(backend,interceptors){var realBackend=interceptingHandler(backend,interceptors);return new ZoneClientBackend(realBackend)}/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function parseUrl(urlStr){var parsedUrl=url.parse(urlStr);return{pathname:parsedUrl.pathname||"",search:parsedUrl.search||"",hash:parsedUrl.hash||""}}function scheduleMicroTask(fn){Zone.current.scheduleMicroTask("scheduleMicrotask",fn)}function _notImplemented(methodName){return new Error("This method is not implemented in Parse5DomAdapter: "+methodName)}function _getElement(el,name){for(var i=0;i<el.childNodes.length;i++){var node=el.childNodes[i];if(node.name===name)return node}return null}function parseDocument(html){var doc=parse5$1.parse(html,{treeAdapter:parse5$1.treeAdapters.htmlparser2}),docElement=_getElement(doc,"html");return doc.head=_getElement(docElement,"head"),doc.body=_getElement(docElement,"body"),doc._window={},doc}function remove(list,el){var index=list.indexOf(el);index>-1&&list.splice(index,1)}function checkNoSyntheticProp(name,nameKind){if(name.charCodeAt(0)===AT_CHARCODE)throw new Error("Found the synthetic "+nameKind+" "+name+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}function initParse5Adapter(injector){return function(){Parse5DomAdapter.makeCurrent()}}function instantiateServerRendererFactory(renderer,engine,zone){return new _angular_platformBrowser_animations.ɵAnimationRendererFactory(renderer,engine,zone)}function _document(injector){var config=injector.get(INITIAL_CONFIG,null);return config&&config.document?parseDocument(config.document):_angular_platformBrowser.ɵgetDOM().createHtmlDocument()}function _getPlatform(platformFactory,options){var extraProviders=options.extraProviders?options.extraProviders:[];return platformFactory([{provide:INITIAL_CONFIG,useValue:{document:options.document,url:options.url}},extraProviders])}function _render(platform,moduleRefPromise){return moduleRefPromise.then(function(moduleRef){var transitionId=moduleRef.injector.get(_angular_platformBrowser.ɵTRANSITION_ID,null);if(!transitionId)throw new Error("renderModule[Factory]() requires the use of BrowserModule.withServerTransition() to ensure\nthe server-rendered app can be properly bootstrapped into a client app.");var applicationRef=moduleRef.injector.get(_angular_core.ApplicationRef);return rxjs_operator_toPromise.toPromise.call(rxjs_operator_first.first.call(rxjs_operator_filter.filter.call(applicationRef.isStable,function(isStable){return isStable}))).then(function(){var output=platform.injector.get(PlatformState).renderToString();return platform.destroy(),output})})}function renderModule(module,options){var platform=_getPlatform(platformDynamicServer,options);return _render(platform,platform.bootstrapModule(module))}function renderModuleFactory(moduleFactory,options){var platform=_getPlatform(platformServer,options);return _render(platform,platform.bootstrapModuleFactory(moduleFactory))}var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},AUTO_STYLE="*",NoopAnimationPlayer=function(){function NoopAnimationPlayer(){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=0}return NoopAnimationPlayer.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(fn){return fn()}),this._onDoneFns=[])},NoopAnimationPlayer.prototype.onStart=function(fn){this._onStartFns.push(fn)},NoopAnimationPlayer.prototype.onDone=function(fn){this._onDoneFns.push(fn)},NoopAnimationPlayer.prototype.onDestroy=function(fn){this._onDestroyFns.push(fn)},NoopAnimationPlayer.prototype.hasStarted=function(){return this._started},NoopAnimationPlayer.prototype.init=function(){},NoopAnimationPlayer.prototype.play=function(){this.hasStarted()||(this.triggerMicrotask(),this._onStart()),this._started=!0},NoopAnimationPlayer.prototype.triggerMicrotask=function(){var _this=this;scheduleMicroTask$1(function(){return _this._onFinish()})},NoopAnimationPlayer.prototype._onStart=function(){this._onStartFns.forEach(function(fn){return fn()}),this._onStartFns=[]},NoopAnimationPlayer.prototype.pause=function(){},NoopAnimationPlayer.prototype.restart=function(){},NoopAnimationPlayer.prototype.finish=function(){this._onFinish()},NoopAnimationPlayer.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(fn){return fn()}),this._onDestroyFns=[])},NoopAnimationPlayer.prototype.reset=function(){},NoopAnimationPlayer.prototype.setPosition=function(p){},NoopAnimationPlayer.prototype.getPosition=function(){return 0},NoopAnimationPlayer}(),AnimationGroupPlayer=function(){function AnimationGroupPlayer(_players){var _this=this;this._players=_players,this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0;var doneCount=0,destroyCount=0,startCount=0,total=this._players.length;0==total?scheduleMicroTask$1(function(){return _this._onFinish()}):this._players.forEach(function(player){player.parentPlayer=_this,player.onDone(function(){++doneCount>=total&&_this._onFinish()}),player.onDestroy(function(){++destroyCount>=total&&_this._onDestroy()}),player.onStart(function(){++startCount>=total&&_this._onStart()})}),this.totalTime=this._players.reduce(function(time,player){return Math.max(time,player.totalTime)},0)}return AnimationGroupPlayer.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(fn){return fn()}),this._onDoneFns=[])},AnimationGroupPlayer.prototype.init=function(){this._players.forEach(function(player){return player.init()})},AnimationGroupPlayer.prototype.onStart=function(fn){this._onStartFns.push(fn)},AnimationGroupPlayer.prototype._onStart=function(){this.hasStarted()||(this._onStartFns.forEach(function(fn){return fn()}),this._onStartFns=[],this._started=!0)},AnimationGroupPlayer.prototype.onDone=function(fn){this._onDoneFns.push(fn)},AnimationGroupPlayer.prototype.onDestroy=function(fn){this._onDestroyFns.push(fn)},AnimationGroupPlayer.prototype.hasStarted=function(){return this._started},AnimationGroupPlayer.prototype.play=function(){this.parentPlayer||this.init(),this._onStart(),this._players.forEach(function(player){return player.play()})},AnimationGroupPlayer.prototype.pause=function(){this._players.forEach(function(player){return player.pause()})},AnimationGroupPlayer.prototype.restart=function(){this._players.forEach(function(player){return player.restart()})},AnimationGroupPlayer.prototype.finish=function(){this._onFinish(),this._players.forEach(function(player){return player.finish()})},AnimationGroupPlayer.prototype.destroy=function(){this._onDestroy()},AnimationGroupPlayer.prototype._onDestroy=function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this._players.forEach(function(player){return player.destroy()}),this._onDestroyFns.forEach(function(fn){return fn()}),this._onDestroyFns=[])},AnimationGroupPlayer.prototype.reset=function(){this._players.forEach(function(player){return player.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1},AnimationGroupPlayer.prototype.setPosition=function(p){var timeAtPosition=p*this.totalTime;this._players.forEach(function(player){var position=player.totalTime?Math.min(1,timeAtPosition/player.totalTime):1;player.setPosition(position)})},AnimationGroupPlayer.prototype.getPosition=function(){var min=0;return this._players.forEach(function(player){var p=player.getPosition();min=Math.min(p,min)}),min},Object.defineProperty(AnimationGroupPlayer.prototype,"players",{get:function(){return this._players},enumerable:!0,configurable:!0}),AnimationGroupPlayer.prototype.beforeDestroy=function(){this.players.forEach(function(player){player.beforeDestroy&&player.beforeDestroy()})},AnimationGroupPlayer}(),ɵPRE_STYLE="!",_contains=function(elm1,elm2){return!1},_matches=function(element,selector){return!1},_query=function(element,selector,multi){return[]};if("undefined"!=typeof Element){if(_contains=function(elm1,elm2){return elm1.contains(elm2)},Element.prototype.matches)_matches=function(element,selector){return element.matches(selector)};else{var proto=Element.prototype,fn_1=proto.matchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector||proto.webkitMatchesSelector;fn_1&&(_matches=function(element,selector){return fn_1.apply(element,[selector])})}_query=function(element,selector,multi){var results=[];if(multi)results.push.apply(results,element.querySelectorAll(selector));else{var elm=element.querySelector(selector);elm&&results.push(elm)}return results}}var matchesElement=_matches,containsElement=_contains,invokeQuery=_query,NoopAnimationDriver=function(){function NoopAnimationDriver(){}return NoopAnimationDriver.prototype.matchesElement=function(element,selector){return matchesElement(element,selector)},NoopAnimationDriver.prototype.containsElement=function(elm1,elm2){return containsElement(elm1,elm2)},NoopAnimationDriver.prototype.query=function(element,selector,multi){return invokeQuery(element,selector,multi)},NoopAnimationDriver.prototype.computeStyle=function(element,prop,defaultValue){return defaultValue||""},NoopAnimationDriver.prototype.animate=function(element,keyframes$$1,duration,delay,easing,previousPlayers){return void 0===previousPlayers&&(previousPlayers=[]),new NoopAnimationPlayer},NoopAnimationDriver}(),AnimationDriver=function(){function AnimationDriver(){}return AnimationDriver}();AnimationDriver.NOOP=new NoopAnimationDriver;/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var ONE_SECOND=1e3,SUBSTITUTION_EXPR_START="{{",SUBSTITUTION_EXPR_END="}}",ENTER_CLASSNAME="ng-enter",LEAVE_CLASSNAME="ng-leave",ENTER_SELECTOR=".ng-enter",LEAVE_SELECTOR=".ng-leave",NG_TRIGGER_CLASSNAME="ng-trigger",NG_TRIGGER_SELECTOR=".ng-trigger",NG_ANIMATING_CLASSNAME="ng-animating",NG_ANIMATING_SELECTOR=".ng-animating",PARAM_REGEX=new RegExp(SUBSTITUTION_EXPR_START+"\\s*(.+?)\\s*"+SUBSTITUTION_EXPR_END,"g"),DASH_CASE_REGEXP=/-+([a-z0-9])/g,EMPTY_ANIMATION_OPTIONS={},Ast=function(){function Ast(){this.options=EMPTY_ANIMATION_OPTIONS}return Ast.prototype.visit=function(ast,context){},Object.defineProperty(Ast.prototype,"params",{get:function(){return this.options.params||null},enumerable:!0,configurable:!0}),Ast}(),TriggerAst=function(_super){function TriggerAst(name,states,transitions){var _this=_super.call(this)||this;return _this.name=name,_this.states=states,_this.transitions=transitions,_this.queryCount=0,_this.depCount=0,_this}return __extends$1(TriggerAst,_super),TriggerAst.prototype.visit=function(visitor,context){return visitor.visitTrigger(this,context)},TriggerAst}(Ast),StateAst=function(_super){function StateAst(name,style$$1){var _this=_super.call(this)||this;return _this.name=name,_this.style=style$$1,_this}return __extends$1(StateAst,_super),StateAst.prototype.visit=function(visitor,context){return visitor.visitState(this,context)},StateAst}(Ast),TransitionAst=function(_super){function TransitionAst(matchers,animation$$1){var _this=_super.call(this)||this;return _this.matchers=matchers,_this.animation=animation$$1,_this.queryCount=0,_this.depCount=0,_this}return __extends$1(TransitionAst,_super),TransitionAst.prototype.visit=function(visitor,context){return visitor.visitTransition(this,context)},TransitionAst}(Ast),SequenceAst=function(_super){function SequenceAst(steps){var _this=_super.call(this)||this;return _this.steps=steps,_this}return __extends$1(SequenceAst,_super),SequenceAst.prototype.visit=function(visitor,context){return visitor.visitSequence(this,context)},SequenceAst}(Ast),GroupAst=function(_super){function GroupAst(steps){var _this=_super.call(this)||this;return _this.steps=steps,_this}return __extends$1(GroupAst,_super),GroupAst.prototype.visit=function(visitor,context){return visitor.visitGroup(this,context)},GroupAst}(Ast),AnimateAst=function(_super){function AnimateAst(timings,style$$1){var _this=_super.call(this)||this;return _this.timings=timings,_this.style=style$$1,_this}return __extends$1(AnimateAst,_super),AnimateAst.prototype.visit=function(visitor,context){return visitor.visitAnimate(this,context)},AnimateAst}(Ast),StyleAst=function(_super){function StyleAst(styles,easing,offset){var _this=_super.call(this)||this;return _this.styles=styles,_this.easing=easing,_this.offset=offset,_this.isEmptyStep=!1,_this.containsDynamicStyles=!1,_this}return __extends$1(StyleAst,_super),StyleAst.prototype.visit=function(visitor,context){return visitor.visitStyle(this,context)},StyleAst}(Ast),KeyframesAst=function(_super){function KeyframesAst(styles){var _this=_super.call(this)||this;return _this.styles=styles,_this}return __extends$1(KeyframesAst,_super),KeyframesAst.prototype.visit=function(visitor,context){return visitor.visitKeyframes(this,context)},KeyframesAst}(Ast),ReferenceAst=function(_super){function ReferenceAst(animation$$1){var _this=_super.call(this)||this;return _this.animation=animation$$1,_this}return __extends$1(ReferenceAst,_super),ReferenceAst.prototype.visit=function(visitor,context){return visitor.visitReference(this,context)},ReferenceAst}(Ast),AnimateChildAst=function(_super){function AnimateChildAst(){return _super.call(this)||this}return __extends$1(AnimateChildAst,_super),AnimateChildAst.prototype.visit=function(visitor,context){return visitor.visitAnimateChild(this,context)},AnimateChildAst}(Ast),AnimateRefAst=function(_super){function AnimateRefAst(animation$$1){var _this=_super.call(this)||this;return _this.animation=animation$$1,_this}return __extends$1(AnimateRefAst,_super),AnimateRefAst.prototype.visit=function(visitor,context){return visitor.visitAnimateRef(this,context)},AnimateRefAst}(Ast),QueryAst=function(_super){function QueryAst(selector,limit,optional,includeSelf,animation$$1){var _this=_super.call(this)||this;return _this.selector=selector,_this.limit=limit,_this.optional=optional,_this.includeSelf=includeSelf,_this.animation=animation$$1,_this}return __extends$1(QueryAst,_super),QueryAst.prototype.visit=function(visitor,context){return visitor.visitQuery(this,context)},QueryAst}(Ast),StaggerAst=function(_super){function StaggerAst(timings,animation$$1){var _this=_super.call(this)||this;return _this.timings=timings,_this.animation=animation$$1,_this}return __extends$1(StaggerAst,_super),StaggerAst.prototype.visit=function(visitor,context){return visitor.visitStagger(this,context)},StaggerAst}(Ast),TimingAst=function(_super){function TimingAst(duration,delay,easing){void 0===delay&&(delay=0),void 0===easing&&(easing=null);var _this=_super.call(this)||this;return _this.duration=duration,_this.delay=delay,_this.easing=easing,_this}return __extends$1(TimingAst,_super),TimingAst.prototype.visit=function(visitor,context){return visitor.visitTiming(this,context)},TimingAst}(Ast),DynamicTimingAst=function(_super){function DynamicTimingAst(value){var _this=_super.call(this,0,0,"")||this;return _this.value=value,_this}return __extends$1(DynamicTimingAst,_super),DynamicTimingAst.prototype.visit=function(visitor,context){return visitor.visitTiming(this,context)},DynamicTimingAst}(TimingAst),ANY_STATE="*",SELF_TOKEN=":self",SELF_TOKEN_REGEX=new RegExp("s*"+SELF_TOKEN+"s*,?","g"),LEAVE_TOKEN=":leave",LEAVE_TOKEN_REGEX=new RegExp(LEAVE_TOKEN,"g"),ENTER_TOKEN=":enter",ENTER_TOKEN_REGEX=new RegExp(ENTER_TOKEN,"g"),ROOT_SELECTOR="",AnimationAstBuilderVisitor=function(){function AnimationAstBuilderVisitor(){}return AnimationAstBuilderVisitor.prototype.build=function(metadata,errors){var context=new AnimationAstBuilderContext(errors);return this._resetContextStyleTimingState(context),visitAnimationNode(this,normalizeAnimationEntry(metadata),context)},AnimationAstBuilderVisitor.prototype._resetContextStyleTimingState=function(context){context.currentQuerySelector=ROOT_SELECTOR,context.collectedStyles={},context.collectedStyles[ROOT_SELECTOR]={},context.currentTime=0},AnimationAstBuilderVisitor.prototype.visitTrigger=function(metadata,context){var _this=this,queryCount=context.queryCount=0,depCount=context.depCount=0,states=[],transitions=[];metadata.definitions.forEach(function(def){if(_this._resetContextStyleTimingState(context),0==def.type){var stateDef_1=def,name=stateDef_1.name;name.split(/\s*,\s*/).forEach(function(n){stateDef_1.name=n,states.push(_this.visitState(stateDef_1,context))}),stateDef_1.name=name}else if(1==def.type){var transition$$1=_this.visitTransition(def,context);queryCount+=transition$$1.queryCount,depCount+=transition$$1.depCount,transitions.push(transition$$1)}else context.errors.push("only state() and transition() definitions can sit inside of a trigger()")});var ast=new TriggerAst(metadata.name,states,transitions);return ast.options=normalizeAnimationOptions(metadata.options),ast.queryCount=queryCount,ast.depCount=depCount,ast},AnimationAstBuilderVisitor.prototype.visitState=function(metadata,context){var styleAst=this.visitStyle(metadata.styles,context),astParams=metadata.options&&metadata.options.params||null;if(styleAst.containsDynamicStyles){var missingSubs_1=new Set,params_1=astParams||{};if(styleAst.styles.forEach(function(value){if(isObject(value)){var stylesObj_1=value;Object.keys(stylesObj_1).forEach(function(prop){extractStyleParams(stylesObj_1[prop]).forEach(function(sub){params_1.hasOwnProperty(sub)||missingSubs_1.add(sub)})})}}),missingSubs_1.size){var missingSubsArr=iteratorToArray(missingSubs_1.values());context.errors.push('state("'+metadata.name+'", ...) must define default values for all the following style substitutions: '+missingSubsArr.join(", "))}}var stateAst=new StateAst(metadata.name,styleAst);return astParams&&(stateAst.options={params:astParams}),stateAst},AnimationAstBuilderVisitor.prototype.visitTransition=function(metadata,context){context.queryCount=0,context.depCount=0;var entry=visitAnimationNode(this,normalizeAnimationEntry(metadata.animation),context),matchers=parseTransitionExpr(metadata.expr,context.errors),ast=new TransitionAst(matchers,entry);return ast.options=normalizeAnimationOptions(metadata.options),ast.queryCount=context.queryCount,ast.depCount=context.depCount,ast},AnimationAstBuilderVisitor.prototype.visitSequence=function(metadata,context){var _this=this,ast=new SequenceAst(metadata.steps.map(function(s){return visitAnimationNode(_this,s,context)}));return ast.options=normalizeAnimationOptions(metadata.options),ast},AnimationAstBuilderVisitor.prototype.visitGroup=function(metadata,context){var _this=this,currentTime=context.currentTime,furthestTime=0,steps=metadata.steps.map(function(step){context.currentTime=currentTime;var innerAst=visitAnimationNode(_this,step,context);return furthestTime=Math.max(furthestTime,context.currentTime),innerAst});context.currentTime=furthestTime;var ast=new GroupAst(steps);return ast.options=normalizeAnimationOptions(metadata.options),ast},AnimationAstBuilderVisitor.prototype.visitAnimate=function(metadata,context){var timingAst=constructTimingAst(metadata.timings,context.errors);context.currentAnimateTimings=timingAst;var styles,styleMetadata=metadata.styles?metadata.styles:style({});if(5==styleMetadata.type)styles=this.visitKeyframes(styleMetadata,context);else{var styleMetadata_1=metadata.styles,isEmpty=!1;if(!styleMetadata_1){isEmpty=!0;var newStyleData={};timingAst.easing&&(newStyleData.easing=timingAst.easing),styleMetadata_1=style(newStyleData)}context.currentTime+=timingAst.duration+timingAst.delay;var styleAst=this.visitStyle(styleMetadata_1,context);styleAst.isEmptyStep=isEmpty,styles=styleAst}return context.currentAnimateTimings=null,new AnimateAst(timingAst,styles)},AnimationAstBuilderVisitor.prototype.visitStyle=function(metadata,context){var ast=this._makeStyleAst(metadata,context);return this._validateStyleAst(ast,context),ast},AnimationAstBuilderVisitor.prototype._makeStyleAst=function(metadata,context){var styles=[];Array.isArray(metadata.styles)?metadata.styles.forEach(function(styleTuple){"string"==typeof styleTuple?styleTuple==AUTO_STYLE?styles.push(styleTuple):context.errors.push("The provided style string value "+styleTuple+" is not allowed."):styles.push(styleTuple)}):styles.push(metadata.styles);var containsDynamicStyles=!1,collectedEasing=null;styles.forEach(function(styleData){if(isObject(styleData)){var styleMap=styleData,easing=styleMap.easing;if(easing&&(collectedEasing=easing,delete styleMap.easing),!containsDynamicStyles)for(var prop in styleMap){var value=styleMap[prop];if(value.toString().indexOf(SUBSTITUTION_EXPR_START)>=0){containsDynamicStyles=!0;break}}}});var ast=new StyleAst(styles,collectedEasing,metadata.offset);return ast.containsDynamicStyles=containsDynamicStyles,ast},AnimationAstBuilderVisitor.prototype._validateStyleAst=function(ast,context){var timings=context.currentAnimateTimings,endTime=context.currentTime,startTime=context.currentTime;timings&&startTime>0&&(startTime-=timings.duration+timings.delay),ast.styles.forEach(function(tuple){"string"!=typeof tuple&&Object.keys(tuple).forEach(function(prop){var collectedStyles=context.collectedStyles[context.currentQuerySelector],collectedEntry=collectedStyles[prop],updateCollectedStyle=!0;collectedEntry&&(startTime!=endTime&&startTime>=collectedEntry.startTime&&endTime<=collectedEntry.endTime&&(context.errors.push('The CSS property "'+prop+'" that exists between the times of "'+collectedEntry.startTime+'ms" and "'+collectedEntry.endTime+'ms" is also being animated in a parallel animation between the times of "'+startTime+'ms" and "'+endTime+'ms"'),updateCollectedStyle=!1),startTime=collectedEntry.startTime),updateCollectedStyle&&(collectedStyles[prop]={startTime:startTime,endTime:endTime}),context.options&&validateStyleParams(tuple[prop],context.options,context.errors)})})},AnimationAstBuilderVisitor.prototype.visitKeyframes=function(metadata,context){var _this=this;if(!context.currentAnimateTimings)return context.errors.push("keyframes() must be placed inside of a call to animate()"),new KeyframesAst([]);var MAX_KEYFRAME_OFFSET=1,totalKeyframesWithOffsets=0,offsets=[],offsetsOutOfOrder=!1,keyframesOutOfRange=!1,previousOffset=0,keyframes$$1=metadata.steps.map(function(styles){var style$$1=_this._makeStyleAst(styles,context),offsetVal=null!=style$$1.offset?style$$1.offset:consumeOffset(style$$1.styles),offset=0;return null!=offsetVal&&(totalKeyframesWithOffsets++,offset=style$$1.offset=offsetVal),keyframesOutOfRange=keyframesOutOfRange||offset<0||offset>1,offsetsOutOfOrder=offsetsOutOfOrder||offset<previousOffset,previousOffset=offset,offsets.push(offset),style$$1});keyframesOutOfRange&&context.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),offsetsOutOfOrder&&context.errors.push("Please ensure that all keyframe offsets are in order");var length=metadata.steps.length,generatedOffset=0;totalKeyframesWithOffsets>0&&totalKeyframesWithOffsets<length?context.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==totalKeyframesWithOffsets&&(generatedOffset=MAX_KEYFRAME_OFFSET/(length-1));var limit=length-1,currentTime=context.currentTime,currentAnimateTimings=context.currentAnimateTimings,animateDuration=currentAnimateTimings.duration;return keyframes$$1.forEach(function(kf,i){var offset=generatedOffset>0?i==limit?1:generatedOffset*i:offsets[i],durationUpToThisFrame=offset*animateDuration;context.currentTime=currentTime+currentAnimateTimings.delay+durationUpToThisFrame,currentAnimateTimings.duration=durationUpToThisFrame,_this._validateStyleAst(kf,context),kf.offset=offset}),new KeyframesAst(keyframes$$1)},AnimationAstBuilderVisitor.prototype.visitReference=function(metadata,context){var entry=visitAnimationNode(this,normalizeAnimationEntry(metadata.animation),context),ast=new ReferenceAst(entry);return ast.options=normalizeAnimationOptions(metadata.options),ast},AnimationAstBuilderVisitor.prototype.visitAnimateChild=function(metadata,context){context.depCount++;var ast=new AnimateChildAst;return ast.options=normalizeAnimationOptions(metadata.options),ast},AnimationAstBuilderVisitor.prototype.visitAnimateRef=function(metadata,context){var animation$$1=this.visitReference(metadata.animation,context),ast=new AnimateRefAst(animation$$1);return ast.options=normalizeAnimationOptions(metadata.options),ast},AnimationAstBuilderVisitor.prototype.visitQuery=function(metadata,context){var parentSelector=context.currentQuerySelector,options=metadata.options||{};context.queryCount++,context.currentQuery=metadata;var _a=normalizeSelector(metadata.selector),selector=_a[0],includeSelf=_a[1];context.currentQuerySelector=parentSelector.length?parentSelector+" "+selector:selector,getOrSetAsInMap(context.collectedStyles,context.currentQuerySelector,{});var entry=visitAnimationNode(this,normalizeAnimationEntry(metadata.animation),context);context.currentQuery=null,context.currentQuerySelector=parentSelector;var ast=new QueryAst(selector,options.limit||0,(!!options.optional),includeSelf,entry);return ast.originalSelector=metadata.selector,ast.options=normalizeAnimationOptions(metadata.options),ast},AnimationAstBuilderVisitor.prototype.visitStagger=function(metadata,context){context.currentQuery||context.errors.push("stagger() can only be used inside of query()");var timings="full"===metadata.timings?{duration:0,delay:0,easing:"full"}:resolveTiming(metadata.timings,context.errors,!0),animation$$1=visitAnimationNode(this,normalizeAnimationEntry(metadata.animation),context);return new StaggerAst(timings,animation$$1)},AnimationAstBuilderVisitor}(),AnimationAstBuilderContext=function(){function AnimationAstBuilderContext(errors){this.errors=errors,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}return AnimationAstBuilderContext}(),ElementInstructionMap=function(){function ElementInstructionMap(){this._map=new Map}return ElementInstructionMap.prototype.consume=function(element){var instructions=this._map.get(element);return instructions?this._map.delete(element):instructions=[],instructions},ElementInstructionMap.prototype.append=function(element,instructions){var existingInstructions=this._map.get(element);existingInstructions||this._map.set(element,existingInstructions=[]),existingInstructions.push.apply(existingInstructions,instructions)},ElementInstructionMap.prototype.has=function(element){return this._map.has(element)},ElementInstructionMap.prototype.clear=function(){this._map.clear()},ElementInstructionMap}(),ONE_FRAME_IN_MILLISECONDS=1,AnimationTimelineBuilderVisitor=function(){function AnimationTimelineBuilderVisitor(){}return AnimationTimelineBuilderVisitor.prototype.buildKeyframes=function(driver,rootElement,ast,startingStyles,finalStyles,options,subInstructions,errors){void 0===errors&&(errors=[]),subInstructions=subInstructions||new ElementInstructionMap;var context=new AnimationTimelineContext(driver,rootElement,subInstructions,errors,[]);context.options=options,context.currentTimeline.setStyles([startingStyles],null,context.errors,options),ast.visit(this,context);var timelines=context.timelines.filter(function(timeline){return timeline.containsAnimation()});if(timelines.length&&Object.keys(finalStyles).length){var tl=timelines[timelines.length-1];tl.allowOnlyTimelineStyles()||tl.setStyles([finalStyles],null,context.errors,options)}return timelines.length?timelines.map(function(timeline){return timeline.buildKeyframes()}):[createTimelineInstruction(rootElement,[],[],[],0,0,"",!1)]},AnimationTimelineBuilderVisitor.prototype.visitTrigger=function(ast,context){},AnimationTimelineBuilderVisitor.prototype.visitState=function(ast,context){},AnimationTimelineBuilderVisitor.prototype.visitTransition=function(ast,context){},AnimationTimelineBuilderVisitor.prototype.visitAnimateChild=function(ast,context){var elementInstructions=context.subInstructions.consume(context.element);if(elementInstructions){var innerContext=context.createSubContext(ast.options),startTime=context.currentTimeline.currentTime,endTime=this._visitSubInstructions(elementInstructions,innerContext,innerContext.options);startTime!=endTime&&context.transformIntoNewTimeline(endTime)}context.previousNode=ast},AnimationTimelineBuilderVisitor.prototype.visitAnimateRef=function(ast,context){var innerContext=context.createSubContext(ast.options);innerContext.transformIntoNewTimeline(),this.visitReference(ast.animation,innerContext),context.transformIntoNewTimeline(innerContext.currentTimeline.currentTime),context.previousNode=ast},AnimationTimelineBuilderVisitor.prototype._visitSubInstructions=function(instructions,context,options){var startTime=context.currentTimeline.currentTime,furthestTime=startTime,duration=null!=options.duration?resolveTimingValue(options.duration):null,delay=null!=options.delay?resolveTimingValue(options.delay):null;return 0!==duration&&instructions.forEach(function(instruction){var instructionTimings=context.appendInstructionToTimeline(instruction,duration,delay);furthestTime=Math.max(furthestTime,instructionTimings.duration+instructionTimings.delay)}),furthestTime},AnimationTimelineBuilderVisitor.prototype.visitReference=function(ast,context){context.updateOptions(ast.options,!0),ast.animation.visit(this,context),context.previousNode=ast},AnimationTimelineBuilderVisitor.prototype.visitSequence=function(ast,context){var _this=this,subContextCount=context.subContextCount,ctx=context,options=ast.options;if(options&&(options.params||options.delay)&&(ctx=context.createSubContext(options),ctx.transformIntoNewTimeline(),null!=options.delay)){ctx.previousNode instanceof StyleAst&&(ctx.currentTimeline.snapshotCurrentStyles(),ctx.previousNode=DEFAULT_NOOP_PREVIOUS_NODE);var delay=resolveTimingValue(options.delay);ctx.delayNextStep(delay)}ast.steps.length&&(ast.steps.forEach(function(s){return s.visit(_this,ctx)}),ctx.currentTimeline.applyStylesToKeyframe(),ctx.subContextCount>subContextCount&&ctx.transformIntoNewTimeline()),context.previousNode=ast},AnimationTimelineBuilderVisitor.prototype.visitGroup=function(ast,context){var _this=this,innerTimelines=[],furthestTime=context.currentTimeline.currentTime,delay=ast.options&&ast.options.delay?resolveTimingValue(ast.options.delay):0;ast.steps.forEach(function(s){var innerContext=context.createSubContext(ast.options);delay&&innerContext.delayNextStep(delay),s.visit(_this,innerContext),furthestTime=Math.max(furthestTime,innerContext.currentTimeline.currentTime),innerTimelines.push(innerContext.currentTimeline)}),innerTimelines.forEach(function(timeline){return context.currentTimeline.mergeTimelineCollectedStyles(timeline)}),context.transformIntoNewTimeline(furthestTime),context.previousNode=ast},AnimationTimelineBuilderVisitor.prototype.visitTiming=function(ast,context){if(ast instanceof DynamicTimingAst){var strValue=context.params?interpolateParams(ast.value,context.params,context.errors):ast.value.toString();return resolveTiming(strValue,context.errors)}return{duration:ast.duration,delay:ast.delay,easing:ast.easing}},AnimationTimelineBuilderVisitor.prototype.visitAnimate=function(ast,context){var timings=context.currentAnimateTimings=this.visitTiming(ast.timings,context),timeline=context.currentTimeline;timings.delay&&(context.incrementTime(timings.delay),timeline.snapshotCurrentStyles());var style$$1=ast.style;style$$1 instanceof KeyframesAst?this.visitKeyframes(style$$1,context):(context.incrementTime(timings.duration),this.visitStyle(style$$1,context),timeline.applyStylesToKeyframe()),context.currentAnimateTimings=null,context.previousNode=ast},AnimationTimelineBuilderVisitor.prototype.visitStyle=function(ast,context){var timeline=context.currentTimeline,timings=context.currentAnimateTimings;!timings&&timeline.getCurrentStyleProperties().length&&timeline.forwardFrame();var easing=timings&&timings.easing||ast.easing;ast.isEmptyStep?timeline.applyEmptyStep(easing):timeline.setStyles(ast.styles,easing,context.errors,context.options),context.previousNode=ast},AnimationTimelineBuilderVisitor.prototype.visitKeyframes=function(ast,context){var currentAnimateTimings=context.currentAnimateTimings,startTime=context.currentTimeline.duration,duration=currentAnimateTimings.duration,innerContext=context.createSubContext(),innerTimeline=innerContext.currentTimeline;innerTimeline.easing=currentAnimateTimings.easing,ast.styles.forEach(function(step){var offset=step.offset||0;innerTimeline.forwardTime(offset*duration),innerTimeline.setStyles(step.styles,step.easing,context.errors,context.options),innerTimeline.applyStylesToKeyframe()}),context.currentTimeline.mergeTimelineCollectedStyles(innerTimeline),context.transformIntoNewTimeline(startTime+duration),context.previousNode=ast},AnimationTimelineBuilderVisitor.prototype.visitQuery=function(ast,context){var _this=this,startTime=context.currentTimeline.currentTime,options=ast.options||{},delay=options.delay?resolveTimingValue(options.delay):0;delay&&(context.previousNode instanceof StyleAst||0==startTime&&context.currentTimeline.getCurrentStyleProperties().length)&&(context.currentTimeline.snapshotCurrentStyles(),context.previousNode=DEFAULT_NOOP_PREVIOUS_NODE);var furthestTime=startTime,elms=context.invokeQuery(ast.selector,ast.originalSelector,ast.limit,ast.includeSelf,!!options.optional,context.errors);context.currentQueryTotal=elms.length;var sameElementTimeline=null;elms.forEach(function(element,i){context.currentQueryIndex=i;var innerContext=context.createSubContext(ast.options,element);delay&&innerContext.delayNextStep(delay),element===context.element&&(sameElementTimeline=innerContext.currentTimeline),ast.animation.visit(_this,innerContext),innerContext.currentTimeline.applyStylesToKeyframe();var endTime=innerContext.currentTimeline.currentTime;furthestTime=Math.max(furthestTime,endTime)}),context.currentQueryIndex=0,context.currentQueryTotal=0,context.transformIntoNewTimeline(furthestTime),sameElementTimeline&&(context.currentTimeline.mergeTimelineCollectedStyles(sameElementTimeline),context.currentTimeline.snapshotCurrentStyles()),context.previousNode=ast},AnimationTimelineBuilderVisitor.prototype.visitStagger=function(ast,context){var parentContext=context.parentContext,tl=context.currentTimeline,timings=ast.timings,duration=Math.abs(timings.duration),maxTime=duration*(context.currentQueryTotal-1),delay=duration*context.currentQueryIndex,staggerTransformer=timings.duration<0?"reverse":timings.easing;switch(staggerTransformer){case"reverse":delay=maxTime-delay;break;case"full":delay=parentContext.currentStaggerTime}var timeline=context.currentTimeline;delay&&timeline.delayNextStep(delay);var startingTime=timeline.currentTime;ast.animation.visit(this,context),context.previousNode=ast,parentContext.currentStaggerTime=tl.currentTime-startingTime+(tl.startTime-parentContext.currentTimeline.startTime)},AnimationTimelineBuilderVisitor}(),DEFAULT_NOOP_PREVIOUS_NODE={},AnimationTimelineContext=function(){function AnimationTimelineContext(_driver,element,subInstructions,errors,timelines,initialTimeline){this._driver=_driver,this.element=element,this.subInstructions=subInstructions,this.errors=errors,this.timelines=timelines,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=DEFAULT_NOOP_PREVIOUS_NODE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=initialTimeline||new TimelineBuilder(element,0),timelines.push(this.currentTimeline)}return Object.defineProperty(AnimationTimelineContext.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),AnimationTimelineContext.prototype.updateOptions=function(options,skipIfExists){var _this=this;if(options){var newOptions=options,optionsToUpdate=this.options;null!=newOptions.duration&&(optionsToUpdate.duration=resolveTimingValue(newOptions.duration)),null!=newOptions.delay&&(optionsToUpdate.delay=resolveTimingValue(newOptions.delay));var newParams=newOptions.params;if(newParams){var paramsToUpdate_1=optionsToUpdate.params;paramsToUpdate_1||(paramsToUpdate_1=this.options.params={}),Object.keys(newParams).forEach(function(name){skipIfExists&&paramsToUpdate_1.hasOwnProperty(name)||(paramsToUpdate_1[name]=interpolateParams(newParams[name],paramsToUpdate_1,_this.errors))})}}},AnimationTimelineContext.prototype._copyOptions=function(){var options={};if(this.options){var oldParams_1=this.options.params;if(oldParams_1){var params_2=options.params={};Object.keys(this.options.params).forEach(function(name){params_2[name]=oldParams_1[name]})}}return options},AnimationTimelineContext.prototype.createSubContext=function(options,element,newTime){void 0===options&&(options=null);var target=element||this.element,context=new AnimationTimelineContext(this._driver,target,this.subInstructions,this.errors,this.timelines,this.currentTimeline.fork(target,newTime||0));return context.previousNode=this.previousNode,context.currentAnimateTimings=this.currentAnimateTimings,context.options=this._copyOptions(),context.updateOptions(options),context.currentQueryIndex=this.currentQueryIndex,context.currentQueryTotal=this.currentQueryTotal,context.parentContext=this,this.subContextCount++,context},AnimationTimelineContext.prototype.transformIntoNewTimeline=function(newTime){return this.previousNode=DEFAULT_NOOP_PREVIOUS_NODE,this.currentTimeline=this.currentTimeline.fork(this.element,newTime),this.timelines.push(this.currentTimeline),this.currentTimeline},AnimationTimelineContext.prototype.appendInstructionToTimeline=function(instruction,duration,delay){var updatedTimings={duration:null!=duration?duration:instruction.duration,delay:this.currentTimeline.currentTime+(null!=delay?delay:0)+instruction.delay,easing:""},builder=new SubTimelineBuilder(instruction.element,instruction.keyframes,instruction.preStyleProps,instruction.postStyleProps,updatedTimings,instruction.stretchStartingKeyframe);return this.timelines.push(builder),updatedTimings},AnimationTimelineContext.prototype.incrementTime=function(time){this.currentTimeline.forwardTime(this.currentTimeline.duration+time)},AnimationTimelineContext.prototype.delayNextStep=function(delay){delay>0&&this.currentTimeline.delayNextStep(delay)},AnimationTimelineContext.prototype.invokeQuery=function(selector,originalSelector,limit,includeSelf,optional,errors){var results=[];if(includeSelf&&results.push(this.element),selector.length>0){var multi=1!=limit;results.push.apply(results,this._driver.query(this.element,selector,multi))}return optional||0!=results.length||errors.push('`query("'+originalSelector+'")` returned zero elements. (Use `query("'+originalSelector+'", { optional: true })` if you wish to allow this.)'),results},AnimationTimelineContext}(),TimelineBuilder=function(){function TimelineBuilder(element,startTime,_elementTimelineStylesLookup){this.element=element,this.startTime=startTime,this._elementTimelineStylesLookup=_elementTimelineStylesLookup,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(element),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(element,this._localTimelineStyles)),this._loadKeyframe()}return TimelineBuilder.prototype.containsAnimation=function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}},TimelineBuilder.prototype.getCurrentStyleProperties=function(){return Object.keys(this._currentKeyframe)},Object.defineProperty(TimelineBuilder.prototype,"currentTime",{get:function(){return this.startTime+this.duration},enumerable:!0,configurable:!0}),TimelineBuilder.prototype.delayNextStep=function(delay){var hasPreStyleStep=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||hasPreStyleStep?(this.forwardTime(this.currentTime+delay),hasPreStyleStep&&this.snapshotCurrentStyles()):this.startTime+=delay},TimelineBuilder.prototype.fork=function(element,currentTime){return this.applyStylesToKeyframe(),new TimelineBuilder(element,currentTime||this.currentTime,this._elementTimelineStylesLookup)},TimelineBuilder.prototype._loadKeyframe=function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))},TimelineBuilder.prototype.forwardFrame=function(){this.duration+=ONE_FRAME_IN_MILLISECONDS,this._loadKeyframe()},TimelineBuilder.prototype.forwardTime=function(time){this.applyStylesToKeyframe(),this.duration=time,this._loadKeyframe()},TimelineBuilder.prototype._updateStyle=function(prop,value){this._localTimelineStyles[prop]=value,this._globalTimelineStyles[prop]=value,this._styleSummary[prop]={time:this.currentTime,value:value}},TimelineBuilder.prototype.allowOnlyTimelineStyles=function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe},TimelineBuilder.prototype.applyEmptyStep=function(easing){var _this=this;easing&&(this._previousKeyframe.easing=easing),Object.keys(this._globalTimelineStyles).forEach(function(prop){_this._backFill[prop]=_this._globalTimelineStyles[prop]||AUTO_STYLE,
_this._currentKeyframe[prop]=AUTO_STYLE}),this._currentEmptyStepKeyframe=this._currentKeyframe},TimelineBuilder.prototype.setStyles=function(input,easing,errors,options){var _this=this;easing&&(this._previousKeyframe.easing=easing);var params=options&&options.params||{},styles=flattenStyles(input,this._globalTimelineStyles);Object.keys(styles).forEach(function(prop){var val=interpolateParams(styles[prop],params,errors);_this._pendingStyles[prop]=val,_this._localTimelineStyles.hasOwnProperty(prop)||(_this._backFill[prop]=_this._globalTimelineStyles.hasOwnProperty(prop)?_this._globalTimelineStyles[prop]:AUTO_STYLE),_this._updateStyle(prop,val)})},TimelineBuilder.prototype.applyStylesToKeyframe=function(){var _this=this,styles=this._pendingStyles,props=Object.keys(styles);0!=props.length&&(this._pendingStyles={},props.forEach(function(prop){var val=styles[prop];_this._currentKeyframe[prop]=val}),Object.keys(this._localTimelineStyles).forEach(function(prop){_this._currentKeyframe.hasOwnProperty(prop)||(_this._currentKeyframe[prop]=_this._localTimelineStyles[prop])}))},TimelineBuilder.prototype.snapshotCurrentStyles=function(){var _this=this;Object.keys(this._localTimelineStyles).forEach(function(prop){var val=_this._localTimelineStyles[prop];_this._pendingStyles[prop]=val,_this._updateStyle(prop,val)})},TimelineBuilder.prototype.getFinalKeyframe=function(){return this._keyframes.get(this.duration)},Object.defineProperty(TimelineBuilder.prototype,"properties",{get:function(){var properties=[];for(var prop in this._currentKeyframe)properties.push(prop);return properties},enumerable:!0,configurable:!0}),TimelineBuilder.prototype.mergeTimelineCollectedStyles=function(timeline){var _this=this;Object.keys(timeline._styleSummary).forEach(function(prop){var details0=_this._styleSummary[prop],details1=timeline._styleSummary[prop];(!details0||details1.time>details0.time)&&_this._updateStyle(prop,details1.value)})},TimelineBuilder.prototype.buildKeyframes=function(){var _this=this;this.applyStylesToKeyframe();var preStyleProps=new Set,postStyleProps=new Set,isEmpty=1===this._keyframes.size&&0===this.duration,finalKeyframes=[];this._keyframes.forEach(function(keyframe,time){var finalKeyframe=copyStyles(keyframe,!0);Object.keys(finalKeyframe).forEach(function(prop){var value=finalKeyframe[prop];value==ɵPRE_STYLE?preStyleProps.add(prop):value==AUTO_STYLE&&postStyleProps.add(prop)}),isEmpty||(finalKeyframe.offset=time/_this.duration),finalKeyframes.push(finalKeyframe)});var preProps=preStyleProps.size?iteratorToArray(preStyleProps.values()):[],postProps=postStyleProps.size?iteratorToArray(postStyleProps.values()):[];if(isEmpty){var kf0=finalKeyframes[0],kf1=copyObj(kf0);kf0.offset=0,kf1.offset=1,finalKeyframes=[kf0,kf1]}return createTimelineInstruction(this.element,finalKeyframes,preProps,postProps,this.duration,this.startTime,this.easing,!1)},TimelineBuilder}(),SubTimelineBuilder=function(_super){function SubTimelineBuilder(element,keyframes$$1,preStyleProps,postStyleProps,timings,_stretchStartingKeyframe){void 0===_stretchStartingKeyframe&&(_stretchStartingKeyframe=!1);var _this=_super.call(this,element,timings.delay)||this;return _this.element=element,_this.keyframes=keyframes$$1,_this.preStyleProps=preStyleProps,_this.postStyleProps=postStyleProps,_this._stretchStartingKeyframe=_stretchStartingKeyframe,_this.timings={duration:timings.duration,delay:timings.delay,easing:timings.easing},_this}return __extends$1(SubTimelineBuilder,_super),SubTimelineBuilder.prototype.containsAnimation=function(){return this.keyframes.length>1},SubTimelineBuilder.prototype.buildKeyframes=function(){var keyframes$$1=this.keyframes,_a=this.timings,delay=_a.delay,duration=_a.duration,easing=_a.easing;if(this._stretchStartingKeyframe&&delay){var newKeyframes=[],totalTime=duration+delay,startingGap=delay/totalTime,newFirstKeyframe=copyStyles(keyframes$$1[0],!1);newFirstKeyframe.offset=0,newKeyframes.push(newFirstKeyframe);var oldFirstKeyframe=copyStyles(keyframes$$1[0],!1);oldFirstKeyframe.offset=roundOffset(startingGap),newKeyframes.push(oldFirstKeyframe);for(var limit=keyframes$$1.length-1,i=1;i<=limit;i++){var kf=copyStyles(keyframes$$1[i],!1),oldOffset=kf.offset,timeAtKeyframe=delay+oldOffset*duration;kf.offset=roundOffset(timeAtKeyframe/totalTime),newKeyframes.push(kf)}duration=totalTime,delay=0,easing="",keyframes$$1=newKeyframes}return createTimelineInstruction(this.element,keyframes$$1,this.preStyleProps,this.postStyleProps,duration,delay,easing,!0)},SubTimelineBuilder}(TimelineBuilder),AnimationStyleNormalizer=function(){function AnimationStyleNormalizer(){}return AnimationStyleNormalizer}(),DIMENSIONAL_PROP_MAP=(function(_super){function WebAnimationsStyleNormalizer(){return null!==_super&&_super.apply(this,arguments)||this}return __extends$1(WebAnimationsStyleNormalizer,_super),WebAnimationsStyleNormalizer.prototype.normalizePropertyName=function(propertyName,errors){return dashCaseToCamelCase(propertyName)},WebAnimationsStyleNormalizer.prototype.normalizeStyleValue=function(userProvidedProperty,normalizedProperty,value,errors){var unit="",strVal=value.toString().trim();if(DIMENSIONAL_PROP_MAP[normalizedProperty]&&0!==value&&"0"!==value)if("number"==typeof value)unit="px";else{var valAndSuffixMatch=value.match(/^[+-]?[\d\.]+([a-z]*)$/);valAndSuffixMatch&&0==valAndSuffixMatch[1].length&&errors.push("Please provide a CSS unit value for "+userProvidedProperty+":"+value)}return strVal+unit},WebAnimationsStyleNormalizer}(AnimationStyleNormalizer),makeBooleanMap("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","))),EMPTY_OBJECT={},AnimationTransitionFactory=function(){function AnimationTransitionFactory(_triggerName,ast,_stateStyles){this._triggerName=_triggerName,this.ast=ast,this._stateStyles=_stateStyles}return AnimationTransitionFactory.prototype.match=function(currentState,nextState){return oneOrMoreTransitionsMatch(this.ast.matchers,currentState,nextState)},AnimationTransitionFactory.prototype.buildStyles=function(stateName,params,errors){var backupStateStyler=this._stateStyles["*"],stateStyler=this._stateStyles[stateName],backupStyles=backupStateStyler?backupStateStyler.buildStyles(params,errors):{};return stateStyler?stateStyler.buildStyles(params,errors):backupStyles},AnimationTransitionFactory.prototype.build=function(driver,element,currentState,nextState,currentOptions,nextOptions,subInstructions){var errors=[],transitionAnimationParams=this.ast.options&&this.ast.options.params||EMPTY_OBJECT,currentAnimationParams=currentOptions&&currentOptions.params||EMPTY_OBJECT,currentStateStyles=this.buildStyles(currentState,currentAnimationParams,errors),nextAnimationParams=nextOptions&&nextOptions.params||EMPTY_OBJECT,nextStateStyles=this.buildStyles(nextState,nextAnimationParams,errors),queriedElements=new Set,preStyleMap=new Map,postStyleMap=new Map,isRemoval="void"===nextState,animationOptions={params:Object.assign({},transitionAnimationParams,nextAnimationParams)},timelines=buildAnimationTimelines(driver,element,this.ast.animation,currentStateStyles,nextStateStyles,animationOptions,subInstructions,errors);if(errors.length)return createTransitionInstruction(element,this._triggerName,currentState,nextState,isRemoval,currentStateStyles,nextStateStyles,[],[],preStyleMap,postStyleMap,errors);timelines.forEach(function(tl){var elm=tl.element,preProps=getOrSetAsInMap(preStyleMap,elm,{});tl.preStyleProps.forEach(function(prop){return preProps[prop]=!0});var postProps=getOrSetAsInMap(postStyleMap,elm,{});tl.postStyleProps.forEach(function(prop){return postProps[prop]=!0}),elm!==element&&queriedElements.add(elm)});var queriedElementsList=iteratorToArray(queriedElements.values());return createTransitionInstruction(element,this._triggerName,currentState,nextState,isRemoval,currentStateStyles,nextStateStyles,timelines,queriedElementsList,preStyleMap,postStyleMap)},AnimationTransitionFactory}(),AnimationStateStyles=function(){function AnimationStateStyles(styles,defaultParams){this.styles=styles,this.defaultParams=defaultParams}return AnimationStateStyles.prototype.buildStyles=function(params,errors){var finalStyles={},combinedParams=copyObj(this.defaultParams);return Object.keys(params).forEach(function(key){var value=params[key];null!=value&&(combinedParams[key]=value)}),this.styles.styles.forEach(function(value){if("string"!=typeof value){var styleObj_1=value;Object.keys(styleObj_1).forEach(function(prop){var val=styleObj_1[prop];val.length>1&&(val=interpolateParams(val,combinedParams,errors)),finalStyles[prop]=val})}}),finalStyles},AnimationStateStyles}(),AnimationTrigger=function(){function AnimationTrigger(name,ast){var _this=this;this.name=name,this.ast=ast,this.transitionFactories=[],this.states={},ast.states.forEach(function(ast){var defaultParams=ast.options&&ast.options.params||{};_this.states[ast.name]=new AnimationStateStyles(ast.style,defaultParams)}),balanceProperties(this.states,"true","1"),balanceProperties(this.states,"false","0"),ast.transitions.forEach(function(ast){_this.transitionFactories.push(new AnimationTransitionFactory(name,ast,_this.states))}),this.fallbackTransition=createFallbackTransition(name,this.states)}return Object.defineProperty(AnimationTrigger.prototype,"containsQueries",{get:function(){return this.ast.queryCount>0},enumerable:!0,configurable:!0}),AnimationTrigger.prototype.matchTransition=function(currentState,nextState){var entry=this.transitionFactories.find(function(f){return f.match(currentState,nextState)});return entry||null},AnimationTrigger.prototype.matchStyles=function(currentState,params,errors){return this.fallbackTransition.buildStyles(currentState,params,errors)},AnimationTrigger}(),EMPTY_INSTRUCTION_MAP=new ElementInstructionMap,TimelineAnimationEngine=function(){function TimelineAnimationEngine(_driver,_normalizer){this._driver=_driver,this._normalizer=_normalizer,this._animations={},this._playersById={},this.players=[]}return TimelineAnimationEngine.prototype.register=function(id,metadata){var errors=[],ast=buildAnimationAst(metadata,errors);if(errors.length)throw new Error("Unable to build the animation due to the following errors: "+errors.join("\n"));this._animations[id]=ast},TimelineAnimationEngine.prototype._buildPlayer=function(i,preStyles,postStyles){var element=i.element,keyframes$$1=normalizeKeyframes(this._driver,this._normalizer,element,i.keyframes,preStyles,postStyles);return this._driver.animate(element,keyframes$$1,i.duration,i.delay,i.easing,[])},TimelineAnimationEngine.prototype.create=function(id,element,options){var _this=this;void 0===options&&(options={});var instructions,errors=[],ast=this._animations[id],autoStylesMap=new Map;if(ast?(instructions=buildAnimationTimelines(this._driver,element,ast,{},{},options,EMPTY_INSTRUCTION_MAP,errors),instructions.forEach(function(inst){var styles=getOrSetAsInMap(autoStylesMap,inst.element,{});inst.postStyleProps.forEach(function(prop){return styles[prop]=null})})):(errors.push("The requested animation doesn't exist or has already been destroyed"),instructions=[]),errors.length)throw new Error("Unable to create the animation due to the following errors: "+errors.join("\n"));autoStylesMap.forEach(function(styles,element){Object.keys(styles).forEach(function(prop){styles[prop]=_this._driver.computeStyle(element,prop,AUTO_STYLE)})});var players=instructions.map(function(i){var styles=autoStylesMap.get(i.element);return _this._buildPlayer(i,{},styles)}),player=optimizeGroupPlayer(players);return this._playersById[id]=player,player.onDestroy(function(){return _this.destroy(id)}),this.players.push(player),player},TimelineAnimationEngine.prototype.destroy=function(id){var player=this._getPlayer(id);player.destroy(),delete this._playersById[id];var index=this.players.indexOf(player);index>=0&&this.players.splice(index,1)},TimelineAnimationEngine.prototype._getPlayer=function(id){var player=this._playersById[id];if(!player)throw new Error("Unable to find the timeline player referenced by "+id);return player},TimelineAnimationEngine.prototype.listen=function(id,element,eventName,callback){var baseEvent=makeAnimationEvent(element,"","","");return listenOnPlayer(this._getPlayer(id),eventName,baseEvent,callback),function(){}},TimelineAnimationEngine.prototype.command=function(id,element,command,args){if("register"==command)return void this.register(id,args[0]);if("create"==command){var options=args[0]||{};return void this.create(id,element,options)}var player=this._getPlayer(id);switch(command){case"play":player.play();break;case"pause":player.pause();break;case"reset":player.reset();break;case"restart":player.restart();break;case"finish":player.finish();break;case"init":player.init();break;case"setPosition":player.setPosition(parseFloat(args[0]));break;case"destroy":this.destroy(id)}},TimelineAnimationEngine}(),QUEUED_CLASSNAME="ng-animate-queued",QUEUED_SELECTOR=".ng-animate-queued",DISABLED_CLASSNAME="ng-animate-disabled",DISABLED_SELECTOR=".ng-animate-disabled",EMPTY_PLAYER_ARRAY=[],NULL_REMOVAL_STATE={namespaceId:"",setForRemoval:null,hasAnimation:!1,removedBeforeQueried:!1},NULL_REMOVED_QUERIED_STATE={namespaceId:"",setForRemoval:null,hasAnimation:!1,removedBeforeQueried:!0},REMOVAL_FLAG="__ng_removed",StateValue=function(){function StateValue(input){var isObj=input&&input.hasOwnProperty("value"),value=isObj?input.value:input;if(this.value=normalizeTriggerValue(value),isObj){var options=copyObj(input);delete options.value,this.options=options}else this.options={};this.options.params||(this.options.params={})}return Object.defineProperty(StateValue.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),StateValue.prototype.absorbOptions=function(options){var newParams=options.params;if(newParams){var oldParams_2=this.options.params;Object.keys(newParams).forEach(function(prop){null==oldParams_2[prop]&&(oldParams_2[prop]=newParams[prop])})}},StateValue}(),VOID_VALUE="void",DEFAULT_STATE_VALUE=new StateValue(VOID_VALUE),DELETED_STATE_VALUE=new StateValue("DELETED"),AnimationTransitionNamespace=function(){function AnimationTransitionNamespace(id,hostElement,_engine){this.id=id,this.hostElement=hostElement,this._engine=_engine,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+id,addClass(hostElement,this._hostClassName)}return AnimationTransitionNamespace.prototype.listen=function(element,name,phase,callback){var _this=this;if(!this._triggers.hasOwnProperty(name))throw new Error('Unable to listen on the animation trigger event "'+phase+'" because the animation trigger "'+name+"\" doesn't exist!");if(null==phase||0==phase.length)throw new Error('Unable to listen on the animation trigger "'+name+'" because the provided event is undefined!');if(!isTriggerEventValid(phase))throw new Error('The provided animation trigger event "'+phase+'" for the animation trigger "'+name+'" is not supported!');var listeners=getOrSetAsInMap(this._elementListeners,element,[]),data={name:name,phase:phase,callback:callback};listeners.push(data);var triggersWithStates=getOrSetAsInMap(this._engine.statesByElement,element,{});return triggersWithStates.hasOwnProperty(name)||(addClass(element,NG_TRIGGER_CLASSNAME),addClass(element,NG_TRIGGER_CLASSNAME+"-"+name),triggersWithStates[name]=null),function(){_this._engine.afterFlush(function(){var index=listeners.indexOf(data);index>=0&&listeners.splice(index,1),_this._triggers[name]||delete triggersWithStates[name]})}},AnimationTransitionNamespace.prototype.register=function(name,ast){return!this._triggers[name]&&(this._triggers[name]=ast,!0)},AnimationTransitionNamespace.prototype._getTrigger=function(name){var trigger$$1=this._triggers[name];if(!trigger$$1)throw new Error('The provided animation trigger "'+name+'" has not been registered!');return trigger$$1},AnimationTransitionNamespace.prototype.trigger=function(element,triggerName,value,defaultToFallback){var _this=this;void 0===defaultToFallback&&(defaultToFallback=!0);var trigger$$1=this._getTrigger(triggerName),player=new TransitionAnimationPlayer(this.id,triggerName,element),triggersWithStates=this._engine.statesByElement.get(element);triggersWithStates||(addClass(element,NG_TRIGGER_CLASSNAME),addClass(element,NG_TRIGGER_CLASSNAME+"-"+triggerName),this._engine.statesByElement.set(element,triggersWithStates={}));var fromState=triggersWithStates[triggerName],toState=new StateValue(value),isObj=value&&value.hasOwnProperty("value");if(!isObj&&fromState&&toState.absorbOptions(fromState.options),triggersWithStates[triggerName]=toState,fromState){if(fromState===DELETED_STATE_VALUE)return player}else fromState=DEFAULT_STATE_VALUE;var isRemoval=toState.value===VOID_VALUE;if(isRemoval||fromState.value!==toState.value){var playersOnElement=getOrSetAsInMap(this._engine.playersByElement,element,[]);playersOnElement.forEach(function(player){player.namespaceId==_this.id&&player.triggerName==triggerName&&player.queued&&player.destroy()});var transition$$1=trigger$$1.matchTransition(fromState.value,toState.value),isFallbackTransition=!1;if(!transition$$1){if(!defaultToFallback)return;transition$$1=trigger$$1.fallbackTransition,isFallbackTransition=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:element,triggerName:triggerName,transition:transition$$1,fromState:fromState,toState:toState,player:player,isFallbackTransition:isFallbackTransition}),isFallbackTransition||(addClass(element,QUEUED_CLASSNAME),player.onStart(function(){removeClass(element,QUEUED_CLASSNAME)})),player.onDone(function(){var index=_this.players.indexOf(player);index>=0&&_this.players.splice(index,1);var players=_this._engine.playersByElement.get(element);if(players){var index_1=players.indexOf(player);index_1>=0&&players.splice(index_1,1)}}),this.players.push(player),playersOnElement.push(player),player}if(!objEquals(fromState.params,toState.params)){var errors=[],fromStyles_1=trigger$$1.matchStyles(fromState.value,fromState.params,errors),toStyles_1=trigger$$1.matchStyles(toState.value,toState.params,errors);errors.length?this._engine.reportError(errors):this._engine.afterFlush(function(){eraseStyles(element,fromStyles_1),setStyles(element,toStyles_1)})}},AnimationTransitionNamespace.prototype.deregister=function(name){var _this=this;delete this._triggers[name],this._engine.statesByElement.forEach(function(stateMap,element){delete stateMap[name]}),this._elementListeners.forEach(function(listeners,element){_this._elementListeners.set(element,listeners.filter(function(entry){return entry.name!=name}))})},AnimationTransitionNamespace.prototype.clearElementCache=function(element){this._engine.statesByElement.delete(element),this._elementListeners.delete(element);var elementPlayers=this._engine.playersByElement.get(element);elementPlayers&&(elementPlayers.forEach(function(player){return player.destroy()}),this._engine.playersByElement.delete(element))},AnimationTransitionNamespace.prototype._destroyInnerNodes=function(rootElement,context,animate$$1){var _this=this;void 0===animate$$1&&(animate$$1=!1),this._engine.driver.query(rootElement,NG_TRIGGER_SELECTOR,!0).forEach(function(elm){if(animate$$1&&containsClass(elm,_this._hostClassName)){var innerNs=_this._engine.namespacesByHostElement.get(elm);innerNs&&innerNs.removeNode(elm,context,!0),_this.removeNode(elm,context,!0)}else _this.clearElementCache(elm)})},AnimationTransitionNamespace.prototype.removeNode=function(element,context,doNotRecurse){var _this=this,engine=this._engine;!doNotRecurse&&element.childElementCount&&this._destroyInnerNodes(element,context,!0);var triggerStates=engine.statesByElement.get(element);if(triggerStates){var players_1=[];if(Object.keys(triggerStates).forEach(function(triggerName){if(_this._triggers[triggerName]){var player=_this.trigger(element,triggerName,VOID_VALUE,!1);player&&players_1.push(player)}}),players_1.length)return engine.markElementAsRemoved(this.id,element,!0,context),void optimizeGroupPlayer(players_1).onDone(function(){return engine.processLeaveNode(element)})}var containsPotentialParentTransition=!1;if(engine.totalAnimations){var currentPlayers=engine.players.length?engine.playersByQueriedElement.get(element):[];if(currentPlayers&&currentPlayers.length)containsPotentialParentTransition=!0;else for(var parent=element;parent=parent.parentNode;){var triggers=engine.statesByElement.get(parent);if(triggers){containsPotentialParentTransition=!0;break}}}var listeners=this._elementListeners.get(element);if(listeners){var visitedTriggers_1=new Set;listeners.forEach(function(listener){var triggerName=listener.name;if(!visitedTriggers_1.has(triggerName)){visitedTriggers_1.add(triggerName);var trigger$$1=_this._triggers[triggerName],transition$$1=trigger$$1.fallbackTransition,elementStates=engine.statesByElement.get(element),fromState=elementStates[triggerName]||DEFAULT_STATE_VALUE,toState=new StateValue(VOID_VALUE),player=new TransitionAnimationPlayer(_this.id,triggerName,element);_this._engine.totalQueuedPlayers++,_this._queue.push({element:element,triggerName:triggerName,transition:transition$$1,fromState:fromState,toState:toState,player:player,isFallbackTransition:!0})}})}containsPotentialParentTransition?engine.markElementAsRemoved(this.id,element,!1,context):(engine.afterFlush(function(){return _this.clearElementCache(element)}),engine.destroyInnerAnimations(element),engine._onRemovalComplete(element,context))},AnimationTransitionNamespace.prototype.insertNode=function(element,parent){addClass(element,this._hostClassName)},AnimationTransitionNamespace.prototype.drainQueuedTransitions=function(microtaskId){var _this=this,instructions=[];return this._queue.forEach(function(entry){var player=entry.player;if(!player.destroyed){var element=entry.element,listeners=_this._elementListeners.get(element);listeners&&listeners.forEach(function(listener){if(listener.name==entry.triggerName){var baseEvent=makeAnimationEvent(element,entry.triggerName,entry.fromState.value,entry.toState.value);baseEvent._data=microtaskId,listenOnPlayer(entry.player,listener.phase,baseEvent,listener.callback)}}),player.markedForDestroy?_this._engine.afterFlush(function(){player.destroy()}):instructions.push(entry)}}),this._queue=[],instructions.sort(function(a,b){var d0=a.transition.ast.depCount,d1=b.transition.ast.depCount;return 0==d0||0==d1?d0-d1:_this._engine.driver.containsElement(a.element,b.element)?1:-1})},AnimationTransitionNamespace.prototype.destroy=function(context){this.players.forEach(function(p){return p.destroy()}),this._destroyInnerNodes(this.hostElement,context)},AnimationTransitionNamespace.prototype.elementContainsData=function(element){var containsData=!1;return this._elementListeners.has(element)&&(containsData=!0),containsData=!!this._queue.find(function(entry){return entry.element===element})||containsData},AnimationTransitionNamespace}(),TransitionAnimationEngine=function(){function TransitionAnimationEngine(driver,_normalizer){this.driver=driver,this._normalizer=_normalizer,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(element,context){}}return TransitionAnimationEngine.prototype._onRemovalComplete=function(element,context){this.onRemovalComplete(element,context)},Object.defineProperty(TransitionAnimationEngine.prototype,"queuedPlayers",{get:function(){var players=[];return this._namespaceList.forEach(function(ns){ns.players.forEach(function(player){player.queued&&players.push(player)})}),players},enumerable:!0,configurable:!0}),TransitionAnimationEngine.prototype.createNamespace=function(namespaceId,hostElement){var ns=new AnimationTransitionNamespace(namespaceId,hostElement,this);return hostElement.parentNode?this._balanceNamespaceList(ns,hostElement):(this.newHostElements.set(hostElement,ns),this.collectEnterElement(hostElement)),this._namespaceLookup[namespaceId]=ns},TransitionAnimationEngine.prototype._balanceNamespaceList=function(ns,hostElement){var limit=this._namespaceList.length-1;if(limit>=0){for(var found=!1,i=limit;i>=0;i--){var nextNamespace=this._namespaceList[i];if(this.driver.containsElement(nextNamespace.hostElement,hostElement)){this._namespaceList.splice(i+1,0,ns),found=!0;break}}found||this._namespaceList.splice(0,0,ns)}else this._namespaceList.push(ns);return this.namespacesByHostElement.set(hostElement,ns),ns},TransitionAnimationEngine.prototype.register=function(namespaceId,hostElement){var ns=this._namespaceLookup[namespaceId];return ns||(ns=this.createNamespace(namespaceId,hostElement)),ns},TransitionAnimationEngine.prototype.registerTrigger=function(namespaceId,name,trigger$$1){var ns=this._namespaceLookup[namespaceId];ns&&ns.register(name,trigger$$1)&&this.totalAnimations++},TransitionAnimationEngine.prototype.destroy=function(namespaceId,context){var _this=this;if(namespaceId){var ns=this._fetchNamespace(namespaceId);this.afterFlush(function(){_this.namespacesByHostElement.delete(ns.hostElement),delete _this._namespaceLookup[namespaceId];var index=_this._namespaceList.indexOf(ns);index>=0&&_this._namespaceList.splice(index,1)}),this.afterFlushAnimationsDone(function(){return ns.destroy(context)})}},TransitionAnimationEngine.prototype._fetchNamespace=function(id){return this._namespaceLookup[id]},TransitionAnimationEngine.prototype.trigger=function(namespaceId,element,name,value){return!!isElementNode(element)&&(this._fetchNamespace(namespaceId).trigger(element,name,value),!0)},TransitionAnimationEngine.prototype.insertNode=function(namespaceId,element,parent,insertBefore){if(isElementNode(element)){var details=element[REMOVAL_FLAG];details&&details.setForRemoval&&(details.setForRemoval=!1),namespaceId&&this._fetchNamespace(namespaceId).insertNode(element,parent),insertBefore&&this.collectEnterElement(element)}},TransitionAnimationEngine.prototype.collectEnterElement=function(element){this.collectedEnterElements.push(element)},TransitionAnimationEngine.prototype.markElementAsDisabled=function(element,value){value?this.disabledNodes.has(element)||(this.disabledNodes.add(element),addClass(element,DISABLED_CLASSNAME)):this.disabledNodes.has(element)&&(this.disabledNodes.delete(element),removeClass(element,DISABLED_CLASSNAME))},TransitionAnimationEngine.prototype.removeNode=function(namespaceId,element,context,doNotRecurse){if(!isElementNode(element))return void this._onRemovalComplete(element,context);var ns=namespaceId?this._fetchNamespace(namespaceId):null;ns?ns.removeNode(element,context,doNotRecurse):this.markElementAsRemoved(namespaceId,element,!1,context)},TransitionAnimationEngine.prototype.markElementAsRemoved=function(namespaceId,element,hasAnimation,context){this.collectedLeaveElements.push(element),element[REMOVAL_FLAG]={namespaceId:namespaceId,setForRemoval:context,hasAnimation:hasAnimation,removedBeforeQueried:!1}},TransitionAnimationEngine.prototype.listen=function(namespaceId,element,name,phase,callback){return isElementNode(element)?this._fetchNamespace(namespaceId).listen(element,name,phase,callback):function(){}},TransitionAnimationEngine.prototype._buildInstruction=function(entry,subTimelines){return entry.transition.build(this.driver,entry.element,entry.fromState.value,entry.toState.value,entry.fromState.options,entry.toState.options,subTimelines)},TransitionAnimationEngine.prototype.destroyInnerAnimations=function(containerElement){var _this=this,elements=this.driver.query(containerElement,NG_TRIGGER_SELECTOR,!0);elements.forEach(function(element){var players=_this.playersByElement.get(element);players&&players.forEach(function(player){player.queued?player.markedForDestroy=!0:player.destroy()});var stateMap=_this.statesByElement.get(element);stateMap&&Object.keys(stateMap).forEach(function(triggerName){return stateMap[triggerName]=DELETED_STATE_VALUE})}),0!=this.playersByQueriedElement.size&&(elements=this.driver.query(containerElement,NG_ANIMATING_SELECTOR,!0),elements.length&&elements.forEach(function(element){var players=_this.playersByQueriedElement.get(element);players&&players.forEach(function(player){return player.finish()})}))},TransitionAnimationEngine.prototype.whenRenderingDone=function(){var _this=this;return new Promise(function(resolve){return _this.players.length?optimizeGroupPlayer(_this.players).onDone(function(){return resolve()}):void resolve()})},TransitionAnimationEngine.prototype.processLeaveNode=function(element){var _this=this,details=element[REMOVAL_FLAG];if(details&&details.setForRemoval){if(element[REMOVAL_FLAG]=NULL_REMOVAL_STATE,details.namespaceId){this.destroyInnerAnimations(element);var ns=this._fetchNamespace(details.namespaceId);ns&&ns.clearElementCache(element)}this._onRemovalComplete(element,details.setForRemoval)}this.driver.matchesElement(element,DISABLED_SELECTOR)&&this.markElementAsDisabled(element,!1),this.driver.query(element,DISABLED_SELECTOR,!0).forEach(function(node){_this.markElementAsDisabled(element,!1)})},TransitionAnimationEngine.prototype.flush=function(microtaskId){var _this=this;void 0===microtaskId&&(microtaskId=-1);var players=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(ns,element){return _this._balanceNamespaceList(ns,element)}),this.newHostElements.clear()),this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var cleanupFns=[];try{players=this._flushAnimations(cleanupFns,microtaskId)}finally{for(var i=0;i<cleanupFns.length;i++)cleanupFns[i]()}}else for(var i=0;i<this.collectedLeaveElements.length;i++){var element=this.collectedLeaveElements[i];this.processLeaveNode(element)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(fn){return fn()}),this._flushFns=[],this._whenQuietFns.length){var quietFns_1=this._whenQuietFns;this._whenQuietFns=[],players.length?optimizeGroupPlayer(players).onDone(function(){quietFns_1.forEach(function(fn){return fn()})}):quietFns_1.forEach(function(fn){return fn()})}},TransitionAnimationEngine.prototype.reportError=function(errors){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+errors.join("\n"))},TransitionAnimationEngine.prototype._flushAnimations=function(cleanupFns,microtaskId){var _this=this,subTimelines=new ElementInstructionMap,skippedPlayers=[],skippedPlayersMap=new Map,queuedInstructions=[],queriedElements=new Map,allPreStyleElements=new Map,allPostStyleElements=new Map,disabledElementsSet=new Set;this.disabledNodes.forEach(function(node){disabledElementsSet.add(node);for(var nodesThatAreDisabled=_this.driver.query(node,QUEUED_SELECTOR,!0),i=0;i<nodesThatAreDisabled.length;i++)disabledElementsSet.add(nodesThatAreDisabled[i])});for(var bodyNode=getBodyNode(),allEnterNodes=this.collectedEnterElements.length?this.collectedEnterElements.filter(createIsRootFilterFn(this.collectedEnterElements)):[],i=0;i<allEnterNodes.length;i++)addClass(allEnterNodes[i],ENTER_CLASSNAME);for(var allLeaveNodes=[],leaveNodesWithoutAnimations=[],i=0;i<this.collectedLeaveElements.length;i++){var element=this.collectedLeaveElements[i],details=element[REMOVAL_FLAG];details&&details.setForRemoval&&(addClass(element,LEAVE_CLASSNAME),allLeaveNodes.push(element),details.hasAnimation||leaveNodesWithoutAnimations.push(element))}cleanupFns.push(function(){allEnterNodes.forEach(function(element){return removeClass(element,ENTER_CLASSNAME)}),
allLeaveNodes.forEach(function(element){removeClass(element,LEAVE_CLASSNAME),_this.processLeaveNode(element)})});for(var allPlayers=[],erroneousTransitions=[],i=this._namespaceList.length-1;i>=0;i--){var ns=this._namespaceList[i];ns.drainQueuedTransitions(microtaskId).forEach(function(entry){var player=entry.player;allPlayers.push(player);var element=entry.element;if(!bodyNode||!_this.driver.containsElement(bodyNode,element))return void player.destroy();var instruction=_this._buildInstruction(entry,subTimelines);if(instruction.errors&&instruction.errors.length)return void erroneousTransitions.push(instruction);if(entry.isFallbackTransition)return player.onStart(function(){return eraseStyles(element,instruction.fromStyles)}),player.onDestroy(function(){return setStyles(element,instruction.toStyles)}),void skippedPlayers.push(player);instruction.timelines.forEach(function(tl){return tl.stretchStartingKeyframe=!0}),subTimelines.append(element,instruction.timelines);var tuple={instruction:instruction,player:player,element:element};queuedInstructions.push(tuple),instruction.queriedElements.forEach(function(element){return getOrSetAsInMap(queriedElements,element,[]).push(player)}),instruction.preStyleProps.forEach(function(stringMap,element){var props=Object.keys(stringMap);if(props.length){var setVal_1=allPreStyleElements.get(element);setVal_1||allPreStyleElements.set(element,setVal_1=new Set),props.forEach(function(prop){return setVal_1.add(prop)})}}),instruction.postStyleProps.forEach(function(stringMap,element){var props=Object.keys(stringMap),setVal=allPostStyleElements.get(element);setVal||allPostStyleElements.set(element,setVal=new Set),props.forEach(function(prop){return setVal.add(prop)})})})}if(erroneousTransitions.length){var errors_1=[];erroneousTransitions.forEach(function(instruction){errors_1.push("@"+instruction.triggerName+" has failed due to:\n"),instruction.errors.forEach(function(error){return errors_1.push("- "+error+"\n")})}),allPlayers.forEach(function(player){return player.destroy()}),this.reportError(errors_1)}for(var enterNodesWithoutAnimations=[],i=0;i<allEnterNodes.length;i++){var element=allEnterNodes[i];subTimelines.has(element)||enterNodesWithoutAnimations.push(element)}var allPreviousPlayersMap=new Map,sortedParentElements=[];queuedInstructions.forEach(function(entry){var element=entry.element;subTimelines.has(element)&&(sortedParentElements.unshift(element),_this._beforeAnimationBuild(entry.player.namespaceId,entry.instruction,allPreviousPlayersMap))}),skippedPlayers.forEach(function(player){var element=player.element,previousPlayers=_this._getPreviousPlayers(element,!1,player.namespaceId,player.triggerName,null);previousPlayers.forEach(function(prevPlayer){getOrSetAsInMap(allPreviousPlayersMap,element,[]).push(prevPlayer),prevPlayer.destroy()})});var replaceNodes=allLeaveNodes.filter(function(node){return replacePostStylesAsPre(node,allPreStyleElements,allPostStyleElements)}),_a=cloakAndComputeStyles(this.driver,leaveNodesWithoutAnimations,allPostStyleElements,AUTO_STYLE),postStylesMap=_a[0],allLeaveQueriedNodes=_a[1];allLeaveQueriedNodes.forEach(function(node){replacePostStylesAsPre(node,allPreStyleElements,allPostStyleElements)&&replaceNodes.push(node)});var preStylesMap=(allPreStyleElements.size?cloakAndComputeStyles(this.driver,enterNodesWithoutAnimations,allPreStyleElements,ɵPRE_STYLE):[new Map])[0];replaceNodes.forEach(function(node){var post=postStylesMap.get(node),pre=preStylesMap.get(node);postStylesMap.set(node,Object.assign({},post,pre))});var rootPlayers=[],subPlayers=[];queuedInstructions.forEach(function(entry){var element=entry.element,player=entry.player,instruction=entry.instruction;if(subTimelines.has(element)){if(disabledElementsSet.has(element))return void skippedPlayers.push(player);var innerPlayer=_this._buildAnimation(player.namespaceId,instruction,allPreviousPlayersMap,skippedPlayersMap,preStylesMap,postStylesMap);player.setRealPlayer(innerPlayer);for(var parentHasPriority=null,i=0;i<sortedParentElements.length;i++){var parent=sortedParentElements[i];if(parent===element)break;if(_this.driver.containsElement(parent,element)){parentHasPriority=parent;break}}if(parentHasPriority){var parentPlayers=_this.playersByElement.get(parentHasPriority);parentPlayers&&parentPlayers.length&&(player.parentPlayer=optimizeGroupPlayer(parentPlayers)),skippedPlayers.push(player)}else rootPlayers.push(player)}else eraseStyles(element,instruction.fromStyles),player.onDestroy(function(){return setStyles(element,instruction.toStyles)}),subPlayers.push(player),disabledElementsSet.has(element)&&skippedPlayers.push(player)}),subPlayers.forEach(function(player){var playersForElement=skippedPlayersMap.get(player.element);if(playersForElement&&playersForElement.length){var innerPlayer=optimizeGroupPlayer(playersForElement);player.setRealPlayer(innerPlayer)}}),skippedPlayers.forEach(function(player){player.parentPlayer?player.parentPlayer.onDestroy(function(){return player.destroy()}):player.destroy()});for(var i=0;i<allLeaveNodes.length;i++){var element=allLeaveNodes[i],details=element[REMOVAL_FLAG];if(removeClass(element,LEAVE_CLASSNAME),!details||!details.hasAnimation){var players=[];if(queriedElements.size){var queriedPlayerResults=queriedElements.get(element);queriedPlayerResults&&queriedPlayerResults.length&&players.push.apply(players,queriedPlayerResults);for(var queriedInnerElements=this.driver.query(element,NG_ANIMATING_SELECTOR,!0),j=0;j<queriedInnerElements.length;j++){var queriedPlayers=queriedElements.get(queriedInnerElements[j]);queriedPlayers&&queriedPlayers.length&&players.push.apply(players,queriedPlayers)}}var activePlayers=players.filter(function(p){return!p.destroyed});activePlayers.length?removeNodesAfterAnimationDone(this,element,activePlayers):this.processLeaveNode(element)}}return allLeaveNodes.length=0,rootPlayers.forEach(function(player){_this.players.push(player),player.onDone(function(){player.destroy();var index=_this.players.indexOf(player);_this.players.splice(index,1)}),player.play()}),rootPlayers},TransitionAnimationEngine.prototype.elementContainsData=function(namespaceId,element){var containsData=!1,details=element[REMOVAL_FLAG];return details&&details.setForRemoval&&(containsData=!0),this.playersByElement.has(element)&&(containsData=!0),this.playersByQueriedElement.has(element)&&(containsData=!0),this.statesByElement.has(element)&&(containsData=!0),this._fetchNamespace(namespaceId).elementContainsData(element)||containsData},TransitionAnimationEngine.prototype.afterFlush=function(callback){this._flushFns.push(callback)},TransitionAnimationEngine.prototype.afterFlushAnimationsDone=function(callback){this._whenQuietFns.push(callback)},TransitionAnimationEngine.prototype._getPreviousPlayers=function(element,isQueriedElement,namespaceId,triggerName,toStateValue){var players=[];if(isQueriedElement){var queriedElementPlayers=this.playersByQueriedElement.get(element);queriedElementPlayers&&(players=queriedElementPlayers)}else{var elementPlayers=this.playersByElement.get(element);if(elementPlayers){var isRemovalAnimation_1=!toStateValue||toStateValue==VOID_VALUE;elementPlayers.forEach(function(player){player.queued||(isRemovalAnimation_1||player.triggerName==triggerName)&&players.push(player)})}}return(namespaceId||triggerName)&&(players=players.filter(function(player){return(!namespaceId||namespaceId==player.namespaceId)&&(!triggerName||triggerName==player.triggerName)})),players},TransitionAnimationEngine.prototype._beforeAnimationBuild=function(namespaceId,instruction,allPreviousPlayersMap){var _this=this,triggerName=instruction.triggerName,rootElement=instruction.element,targetNameSpaceId=instruction.isRemovalTransition?void 0:namespaceId,targetTriggerName=instruction.isRemovalTransition?void 0:triggerName;instruction.timelines.map(function(timelineInstruction){var element=timelineInstruction.element,isQueriedElement=element!==rootElement,players=getOrSetAsInMap(allPreviousPlayersMap,element,[]),previousPlayers=_this._getPreviousPlayers(element,isQueriedElement,targetNameSpaceId,targetTriggerName,instruction.toState);previousPlayers.forEach(function(player){var realPlayer=player.getRealPlayer();realPlayer.beforeDestroy&&realPlayer.beforeDestroy(),player.destroy(),players.push(player)})}),eraseStyles(rootElement,instruction.fromStyles)},TransitionAnimationEngine.prototype._buildAnimation=function(namespaceId,instruction,allPreviousPlayersMap,skippedPlayersMap,preStylesMap,postStylesMap){var _this=this,triggerName=instruction.triggerName,rootElement=instruction.element,allQueriedPlayers=[],allConsumedElements=new Set,allSubElements=new Set,allNewPlayers=instruction.timelines.map(function(timelineInstruction){var element=timelineInstruction.element;allConsumedElements.add(element);var details=element[REMOVAL_FLAG];if(details&&details.removedBeforeQueried)return new NoopAnimationPlayer;var isQueriedElement=element!==rootElement,previousPlayers=flattenGroupPlayers((allPreviousPlayersMap.get(element)||EMPTY_PLAYER_ARRAY).map(function(p){return p.getRealPlayer()})).filter(function(p){var pp=p;return!!pp.element&&pp.element===element}),preStyles=preStylesMap.get(element),postStyles=postStylesMap.get(element),keyframes$$1=normalizeKeyframes(_this.driver,_this._normalizer,element,timelineInstruction.keyframes,preStyles,postStyles),player=_this._buildPlayer(timelineInstruction,keyframes$$1,previousPlayers);if(timelineInstruction.subTimeline&&skippedPlayersMap&&allSubElements.add(element),isQueriedElement){var wrappedPlayer=new TransitionAnimationPlayer(namespaceId,triggerName,element);wrappedPlayer.setRealPlayer(player),allQueriedPlayers.push(wrappedPlayer)}return player});allQueriedPlayers.forEach(function(player){getOrSetAsInMap(_this.playersByQueriedElement,player.element,[]).push(player),player.onDone(function(){return deleteOrUnsetInMap(_this.playersByQueriedElement,player.element,player)})}),allConsumedElements.forEach(function(element){return addClass(element,NG_ANIMATING_CLASSNAME)});var player=optimizeGroupPlayer(allNewPlayers);return player.onDestroy(function(){allConsumedElements.forEach(function(element){return removeClass(element,NG_ANIMATING_CLASSNAME)}),setStyles(rootElement,instruction.toStyles)}),allSubElements.forEach(function(element){getOrSetAsInMap(skippedPlayersMap,element,[]).push(player)}),player},TransitionAnimationEngine.prototype._buildPlayer=function(instruction,keyframes$$1,previousPlayers){return keyframes$$1.length>0?this.driver.animate(instruction.element,keyframes$$1,instruction.duration,instruction.delay,instruction.easing,previousPlayers):new NoopAnimationPlayer},TransitionAnimationEngine}(),TransitionAnimationPlayer=function(){function TransitionAnimationPlayer(namespaceId,triggerName,element){this.namespaceId=namespaceId,this.triggerName=triggerName,this.element=element,this._player=new NoopAnimationPlayer,this._containsRealPlayer=!1,this._queuedCallbacks={},this._destroyed=!1,this.markedForDestroy=!1}return Object.defineProperty(TransitionAnimationPlayer.prototype,"queued",{get:function(){return 0==this._containsRealPlayer},enumerable:!0,configurable:!0}),Object.defineProperty(TransitionAnimationPlayer.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),TransitionAnimationPlayer.prototype.setRealPlayer=function(player){var _this=this;this._containsRealPlayer||(this._player=player,Object.keys(this._queuedCallbacks).forEach(function(phase){_this._queuedCallbacks[phase].forEach(function(callback){return listenOnPlayer(player,phase,void 0,callback)})}),this._queuedCallbacks={},this._containsRealPlayer=!0)},TransitionAnimationPlayer.prototype.getRealPlayer=function(){return this._player},TransitionAnimationPlayer.prototype._queueEvent=function(name,callback){getOrSetAsInMap(this._queuedCallbacks,name,[]).push(callback)},TransitionAnimationPlayer.prototype.onDone=function(fn){this.queued&&this._queueEvent("done",fn),this._player.onDone(fn)},TransitionAnimationPlayer.prototype.onStart=function(fn){this.queued&&this._queueEvent("start",fn),this._player.onStart(fn)},TransitionAnimationPlayer.prototype.onDestroy=function(fn){this.queued&&this._queueEvent("destroy",fn),this._player.onDestroy(fn)},TransitionAnimationPlayer.prototype.init=function(){this._player.init()},TransitionAnimationPlayer.prototype.hasStarted=function(){return!this.queued&&this._player.hasStarted()},TransitionAnimationPlayer.prototype.play=function(){!this.queued&&this._player.play()},TransitionAnimationPlayer.prototype.pause=function(){!this.queued&&this._player.pause()},TransitionAnimationPlayer.prototype.restart=function(){!this.queued&&this._player.restart()},TransitionAnimationPlayer.prototype.finish=function(){this._player.finish()},TransitionAnimationPlayer.prototype.destroy=function(){this._destroyed=!0,this._player.destroy()},TransitionAnimationPlayer.prototype.reset=function(){!this.queued&&this._player.reset()},TransitionAnimationPlayer.prototype.setPosition=function(p){this.queued||this._player.setPosition(p)},TransitionAnimationPlayer.prototype.getPosition=function(){return this.queued?0:this._player.getPosition()},Object.defineProperty(TransitionAnimationPlayer.prototype,"totalTime",{get:function(){return this._player.totalTime},enumerable:!0,configurable:!0}),TransitionAnimationPlayer}(),CLASSES_CACHE_KEY="$$classes",AnimationEngine=function(){function AnimationEngine(driver,normalizer){var _this=this;this._triggerCache={},this.onRemovalComplete=function(element,context){},this._transitionEngine=new TransitionAnimationEngine(driver,normalizer),this._timelineEngine=new TimelineAnimationEngine(driver,normalizer),this._transitionEngine.onRemovalComplete=function(element,context){return _this.onRemovalComplete(element,context)}}return AnimationEngine.prototype.registerTrigger=function(componentId,namespaceId,hostElement,name,metadata){var cacheKey=componentId+"-"+name,trigger$$1=this._triggerCache[cacheKey];if(!trigger$$1){var errors=[],ast=buildAnimationAst(metadata,errors);if(errors.length)throw new Error('The animation trigger "'+name+'" has failed to build due to the following errors:\n - '+errors.join("\n - "));trigger$$1=buildTrigger(name,ast),this._triggerCache[cacheKey]=trigger$$1}this._transitionEngine.registerTrigger(namespaceId,name,trigger$$1)},AnimationEngine.prototype.register=function(namespaceId,hostElement){this._transitionEngine.register(namespaceId,hostElement)},AnimationEngine.prototype.destroy=function(namespaceId,context){this._transitionEngine.destroy(namespaceId,context)},AnimationEngine.prototype.onInsert=function(namespaceId,element,parent,insertBefore){this._transitionEngine.insertNode(namespaceId,element,parent,insertBefore)},AnimationEngine.prototype.onRemove=function(namespaceId,element,context){this._transitionEngine.removeNode(namespaceId,element,context)},AnimationEngine.prototype.disableAnimations=function(element,disable){this._transitionEngine.markElementAsDisabled(element,disable)},AnimationEngine.prototype.process=function(namespaceId,element,property,value){if("@"==property.charAt(0)){var _a=parseTimelineCommand(property),id=_a[0],action=_a[1],args=value;this._timelineEngine.command(id,element,action,args)}else this._transitionEngine.trigger(namespaceId,element,property,value)},AnimationEngine.prototype.listen=function(namespaceId,element,eventName,eventPhase,callback){if("@"==eventName.charAt(0)){var _a=parseTimelineCommand(eventName),id=_a[0],action=_a[1];return this._timelineEngine.listen(id,element,action,callback)}return this._transitionEngine.listen(namespaceId,element,eventName,eventPhase,callback)},AnimationEngine.prototype.flush=function(microtaskId){void 0===microtaskId&&(microtaskId=-1),this._transitionEngine.flush(microtaskId)},Object.defineProperty(AnimationEngine.prototype,"players",{get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)},enumerable:!0,configurable:!0}),AnimationEngine.prototype.whenRenderingDone=function(){return this._transitionEngine.whenRenderingDone()},AnimationEngine}(),HttpHandler=(function(){function WebAnimationsPlayer(element,keyframes$$1,options,previousPlayers){void 0===previousPlayers&&(previousPlayers=[]);var _this=this;this.element=element,this.keyframes=keyframes$$1,this.options=options,this.previousPlayers=previousPlayers,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.previousStyles={},this.currentSnapshot={},this._duration=options.duration,this._delay=options.delay||0,this.time=this._duration+this._delay,allowPreviousPlayerStylesMerge(this._duration,this._delay)&&previousPlayers.forEach(function(player){var styles=player.currentSnapshot;Object.keys(styles).forEach(function(prop){return _this.previousStyles[prop]=styles[prop]})})}return WebAnimationsPlayer.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(fn){return fn()}),this._onDoneFns=[])},WebAnimationsPlayer.prototype.init=function(){this._buildPlayer(),this._preparePlayerBeforeStart()},WebAnimationsPlayer.prototype._buildPlayer=function(){var _this=this;if(!this._initialized){this._initialized=!0;var keyframes$$1=this.keyframes.map(function(styles){return copyStyles(styles,!1)}),previousStyleProps=Object.keys(this.previousStyles);if(previousStyleProps.length){var startingKeyframe_1=keyframes$$1[0],missingStyleProps_1=[];if(previousStyleProps.forEach(function(prop){startingKeyframe_1.hasOwnProperty(prop)||missingStyleProps_1.push(prop),startingKeyframe_1[prop]=_this.previousStyles[prop]}),missingStyleProps_1.length)for(var self_1=this,_loop_1=function(){var kf=keyframes$$1[i];missingStyleProps_1.forEach(function(prop){kf[prop]=_computeStyle(self_1.element,prop)})},i=1;i<keyframes$$1.length;i++)_loop_1()}this._player=this._triggerWebAnimation(this.element,keyframes$$1,this.options),this._finalKeyframe=keyframes$$1.length?keyframes$$1[keyframes$$1.length-1]:{},this._player.addEventListener("finish",function(){return _this._onFinish()})}},WebAnimationsPlayer.prototype._preparePlayerBeforeStart=function(){this._delay?this._resetDomPlayerState():this._player.pause()},WebAnimationsPlayer.prototype._triggerWebAnimation=function(element,keyframes$$1,options){return element.animate(keyframes$$1,options)},Object.defineProperty(WebAnimationsPlayer.prototype,"domPlayer",{get:function(){return this._player},enumerable:!0,configurable:!0}),WebAnimationsPlayer.prototype.onStart=function(fn){this._onStartFns.push(fn)},WebAnimationsPlayer.prototype.onDone=function(fn){this._onDoneFns.push(fn)},WebAnimationsPlayer.prototype.onDestroy=function(fn){this._onDestroyFns.push(fn)},WebAnimationsPlayer.prototype.play=function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(fn){return fn()}),this._onStartFns=[],this._started=!0),this._player.play()},WebAnimationsPlayer.prototype.pause=function(){this.init(),this._player.pause()},WebAnimationsPlayer.prototype.finish=function(){this.init(),this._onFinish(),this._player.finish()},WebAnimationsPlayer.prototype.reset=function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1},WebAnimationsPlayer.prototype._resetDomPlayerState=function(){this._player&&this._player.cancel()},WebAnimationsPlayer.prototype.restart=function(){this.reset(),this.play()},WebAnimationsPlayer.prototype.hasStarted=function(){return this._started},WebAnimationsPlayer.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._onDestroyFns.forEach(function(fn){return fn()}),this._onDestroyFns=[])},WebAnimationsPlayer.prototype.setPosition=function(p){this._player.currentTime=p*this.time},WebAnimationsPlayer.prototype.getPosition=function(){return this._player.currentTime/this.time},Object.defineProperty(WebAnimationsPlayer.prototype,"totalTime",{get:function(){return this._delay+this._duration},enumerable:!0,configurable:!0}),WebAnimationsPlayer.prototype.beforeDestroy=function(){var _this=this,styles={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(prop){"offset"!=prop&&(styles[prop]=_this._finished?_this._finalKeyframe[prop]:_computeStyle(_this.element,prop))}),this.currentSnapshot=styles},WebAnimationsPlayer}(),function(){function HttpHandler(){}return HttpHandler}()),HttpBackend=function(){function HttpBackend(){}return HttpBackend}(),HttpHeaders=function(){function HttpHeaders(headers){var _this=this;this.normalizedNames=new Map,this.lazyUpdate=null,headers?"string"==typeof headers?this.lazyInit=function(){_this.headers=new Map,headers.split("\n").forEach(function(line){var index=line.indexOf(":");if(index>0){var name_1=line.slice(0,index),key=name_1.toLowerCase(),value=line.slice(index+1).trim();_this.maybeSetNormalizedName(name_1,key),_this.headers.has(key)?_this.headers.get(key).push(value):_this.headers.set(key,[value])}})}:this.lazyInit=function(){_this.headers=new Map,Object.keys(headers).forEach(function(name){var values=headers[name],key=name.toLowerCase();"string"==typeof values&&(values=[values]),values.length>0&&(_this.headers.set(key,values),_this.maybeSetNormalizedName(name,key))})}:this.headers=new Map}return HttpHeaders.prototype.has=function(name){return this.init(),this.headers.has(name.toLowerCase())},HttpHeaders.prototype.get=function(name){this.init();var values=this.headers.get(name.toLowerCase());return values&&values.length>0?values[0]:null},HttpHeaders.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},HttpHeaders.prototype.getAll=function(name){return this.init(),this.headers.get(name.toLowerCase())||null},HttpHeaders.prototype.append=function(name,value){return this.clone({name:name,value:value,op:"a"})},HttpHeaders.prototype.set=function(name,value){return this.clone({name:name,value:value,op:"s"})},HttpHeaders.prototype.delete=function(name,value){return this.clone({name:name,value:value,op:"d"})},HttpHeaders.prototype.maybeSetNormalizedName=function(name,lcName){this.normalizedNames.has(lcName)||this.normalizedNames.set(lcName,name)},HttpHeaders.prototype.init=function(){var _this=this;this.lazyInit&&(this.lazyInit instanceof HttpHeaders?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(update){return _this.applyUpdate(update)}),this.lazyUpdate=null))},HttpHeaders.prototype.copyFrom=function(other){var _this=this;other.init(),Array.from(other.headers.keys()).forEach(function(key){_this.headers.set(key,other.headers.get(key)),_this.normalizedNames.set(key,other.normalizedNames.get(key))})},HttpHeaders.prototype.clone=function(update){var clone=new HttpHeaders;return clone.lazyInit=this.lazyInit&&this.lazyInit instanceof HttpHeaders?this.lazyInit:this,clone.lazyUpdate=(this.lazyUpdate||[]).concat([update]),clone},HttpHeaders.prototype.applyUpdate=function(update){var key=update.name.toLowerCase();switch(update.op){case"a":case"s":var value=update.value;if("string"==typeof value&&(value=[value]),0===value.length)return;this.maybeSetNormalizedName(update.name,key);var base=("a"===update.op?this.headers.get(key):void 0)||[];base.push.apply(base,value),this.headers.set(key,base);break;case"d":var toDelete_1=update.value;if(toDelete_1){var existing=this.headers.get(key);if(!existing)return;existing=existing.filter(function(value){return toDelete_1.indexOf(value)===-1}),0===existing.length?(this.headers.delete(key),this.normalizedNames.delete(key)):this.headers.set(key,existing)}else this.headers.delete(key),this.normalizedNames.delete(key)}},HttpHeaders.prototype.forEach=function(fn){var _this=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(key){return fn(_this.normalizedNames.get(key),_this.headers.get(key))})},HttpHeaders}(),HttpUrlEncodingCodec=function(){function HttpUrlEncodingCodec(){}return HttpUrlEncodingCodec.prototype.encodeKey=function(k){return standardEncoding(k)},HttpUrlEncodingCodec.prototype.encodeValue=function(v){return standardEncoding(v)},HttpUrlEncodingCodec.prototype.decodeKey=function(k){return decodeURIComponent(k)},HttpUrlEncodingCodec.prototype.decodeValue=function(v){return decodeURIComponent(v)},HttpUrlEncodingCodec}(),HttpParams=function(){function HttpParams(options){void 0===options&&(options={});var _this=this;if(this.updates=null,this.cloneFrom=null,this.encoder=options.encoder||new HttpUrlEncodingCodec,options.fromString){if(options.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=paramParser(options.fromString,this.encoder)}else options.fromObject?(this.map=new Map,Object.keys(options.fromObject).forEach(function(key){var value=options.fromObject[key];_this.map.set(key,Array.isArray(value)?value:[value])})):this.map=null}return HttpParams.prototype.has=function(param){return this.init(),this.map.has(param)},HttpParams.prototype.get=function(param){this.init();var res=this.map.get(param);return res?res[0]:null},HttpParams.prototype.getAll=function(param){return this.init(),this.map.get(param)||null},HttpParams.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},HttpParams.prototype.append=function(param,value){return this.clone({param:param,value:value,op:"a"})},HttpParams.prototype.set=function(param,value){return this.clone({param:param,value:value,op:"s"})},HttpParams.prototype.delete=function(param,value){return this.clone({param:param,value:value,op:"d"})},HttpParams.prototype.toString=function(){var _this=this;return this.init(),this.keys().map(function(key){var eKey=_this.encoder.encodeKey(key);return _this.map.get(key).map(function(value){return eKey+"="+_this.encoder.encodeValue(value)}).join("&")}).join("&")},HttpParams.prototype.clone=function(update){var clone=new HttpParams({encoder:this.encoder});return clone.cloneFrom=this.cloneFrom||this,clone.updates=(this.updates||[]).concat([update]),clone},HttpParams.prototype.init=function(){var _this=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(key){return _this.map.set(key,_this.cloneFrom.map.get(key))}),this.updates.forEach(function(update){switch(update.op){case"a":case"s":var base=("a"===update.op?_this.map.get(update.param):void 0)||[];base.push(update.value),_this.map.set(update.param,base);break;case"d":if(void 0===update.value){_this.map.delete(update.param);break}var base_1=_this.map.get(update.param)||[],idx=base_1.indexOf(update.value);idx!==-1&&base_1.splice(idx,1),base_1.length>0?_this.map.set(update.param,base_1):_this.map.delete(update.param)}}),this.cloneFrom=null)},HttpParams}(),HttpRequest=function(){function HttpRequest(method,url$$1,third,fourth){this.url=url$$1,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=method.toUpperCase();var options;if(mightHaveBody(this.method)||fourth?(this.body=third||null,options=fourth):options=third,options&&(this.reportProgress=!!options.reportProgress,this.withCredentials=!!options.withCredentials,options.responseType&&(this.responseType=options.responseType),options.headers&&(this.headers=options.headers),options.params&&(this.params=options.params)),this.headers||(this.headers=new HttpHeaders),this.params){var params=this.params.toString();if(0===params.length)this.urlWithParams=url$$1;else{var qIdx=url$$1.indexOf("?"),sep=qIdx===-1?"?":qIdx<url$$1.length-1?"&":"";this.urlWithParams=url$$1+sep+params}}else this.params=new HttpParams,this.urlWithParams=url$$1}return HttpRequest.prototype.serializeBody=function(){return null===this.body?null:isArrayBuffer(this.body)||isBlob(this.body)||isFormData(this.body)||"string"==typeof this.body?this.body:this.body instanceof HttpParams?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},HttpRequest.prototype.detectContentTypeHeader=function(){return null===this.body?null:isFormData(this.body)?null:isBlob(this.body)?this.body.type||null:isArrayBuffer(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof HttpParams?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},HttpRequest.prototype.clone=function(update){void 0===update&&(update={});var method=update.method||this.method,url$$1=update.url||this.url,responseType=update.responseType||this.responseType,body=void 0!==update.body?update.body:this.body,withCredentials=void 0!==update.withCredentials?update.withCredentials:this.withCredentials,reportProgress=void 0!==update.reportProgress?update.reportProgress:this.reportProgress,headers=update.headers||this.headers,params=update.params||this.params;return void 0!==update.setHeaders&&(headers=Object.keys(update.setHeaders).reduce(function(headers,name){return headers.set(name,update.setHeaders[name])},headers)),update.setParams&&(params=Object.keys(update.setParams).reduce(function(params,param){return params.set(param,update.setParams[param])},params)),new HttpRequest(method,url$$1,body,{params:params,headers:headers,reportProgress:reportProgress,responseType:responseType,withCredentials:withCredentials})},HttpRequest}(),HttpEventType={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};HttpEventType[HttpEventType.Sent]="Sent",HttpEventType[HttpEventType.UploadProgress]="UploadProgress",HttpEventType[HttpEventType.ResponseHeader]="ResponseHeader",HttpEventType[HttpEventType.DownloadProgress]="DownloadProgress",HttpEventType[HttpEventType.Response]="Response",HttpEventType[HttpEventType.User]="User";var HttpResponseBase=function(){function HttpResponseBase(init,defaultStatus,defaultStatusText){void 0===defaultStatus&&(defaultStatus=200),void 0===defaultStatusText&&(defaultStatusText="OK"),this.headers=init.headers||new HttpHeaders,this.status=void 0!==init.status?init.status:defaultStatus,this.statusText=init.statusText||defaultStatusText,this.url=init.url||null,this.ok=this.status>=200&&this.status<300}return HttpResponseBase}(),HttpHeaderResponse=function(_super){function HttpHeaderResponse(init){void 0===init&&(init={});var _this=_super.call(this,init)||this;return _this.type=HttpEventType.ResponseHeader,_this}return __extends$1(HttpHeaderResponse,_super),HttpHeaderResponse.prototype.clone=function(update){return void 0===update&&(update={}),new HttpHeaderResponse({headers:update.headers||this.headers,status:void 0!==update.status?update.status:this.status,statusText:update.statusText||this.statusText,url:update.url||this.url||void 0})},HttpHeaderResponse}(HttpResponseBase),HttpResponse=function(_super){function HttpResponse(init){void 0===init&&(init={});var _this=_super.call(this,init)||this;return _this.type=HttpEventType.Response,_this.body=init.body||null,_this}return __extends$1(HttpResponse,_super),HttpResponse.prototype.clone=function(update){return void 0===update&&(update={}),new HttpResponse({body:void 0!==update.body?update.body:this.body,headers:update.headers||this.headers,status:void 0!==update.status?update.status:this.status,statusText:update.statusText||this.statusText,url:update.url||this.url||void 0})},HttpResponse}(HttpResponseBase),HttpErrorResponse=function(_super){function HttpErrorResponse(init){var _this=_super.call(this,init,0,"Unknown Error")||this;return _this.name="HttpErrorResponse",_this.ok=!1,_this.status>=200&&_this.status<300?_this.message="Http failure during parsing for "+(init.url||"(unknown url)"):_this.message="Http failure response for "+(init.url||"(unknown url)")+": "+init.status+" "+init.statusText,_this.error=init.error||null,_this}return __extends$1(HttpErrorResponse,_super),HttpErrorResponse}(HttpResponseBase),HttpClient=function(){function HttpClient(handler){this.handler=handler}return HttpClient.prototype.request=function(first$$1,url$$1,options){
var _this=this;void 0===options&&(options={});var req;if(first$$1 instanceof HttpRequest)req=first$$1;else{var headers=void 0;void 0!==!!options.headers&&(headers=options.headers instanceof HttpHeaders?options.headers:new HttpHeaders(options.headers));var params=void 0;options.params&&(params=options.params instanceof HttpParams?options.params:new HttpParams({fromObject:options.params})),req=new HttpRequest(first$$1,url$$1,options.body||null,{headers:headers,params:params,reportProgress:options.reportProgress,responseType:options.responseType||"json",withCredentials:options.withCredentials})}var events$=rxjs_operator_concatMap.concatMap.call(rxjs_observable_of.of(req),function(req){return _this.handler.handle(req)});if(first$$1 instanceof HttpRequest||"events"===options.observe)return events$;var res$=rxjs_operator_filter.filter.call(events$,function(event){return event instanceof HttpResponse});switch(options.observe||"body"){case"body":switch(req.responseType){case"arraybuffer":return rxjs_operator_map.map.call(res$,function(res){if(null!==res.body&&!(res.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return res.body});case"blob":return rxjs_operator_map.map.call(res$,function(res){if(null!==res.body&&!(res.body instanceof Blob))throw new Error("Response is not a Blob.");return res.body});case"text":return rxjs_operator_map.map.call(res$,function(res){if(null!==res.body&&"string"!=typeof res.body)throw new Error("Response is not a string.");return res.body});case"json":default:return rxjs_operator_map.map.call(res$,function(res){return res.body})}case"response":return res$;default:throw new Error("Unreachable: unhandled observe type "+options.observe+"}")}},HttpClient.prototype.delete=function(url$$1,options){return void 0===options&&(options={}),this.request("DELETE",url$$1,options)},HttpClient.prototype.get=function(url$$1,options){return void 0===options&&(options={}),this.request("GET",url$$1,options)},HttpClient.prototype.head=function(url$$1,options){return void 0===options&&(options={}),this.request("HEAD",url$$1,options)},HttpClient.prototype.jsonp=function(url$$1,callbackParam){return this.request("JSONP",url$$1,{params:(new HttpParams).append(callbackParam,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},HttpClient.prototype.options=function(url$$1,options){return void 0===options&&(options={}),this.request("OPTIONS",url$$1,options)},HttpClient.prototype.patch=function(url$$1,body,options){return void 0===options&&(options={}),this.request("PATCH",url$$1,addBody(options,body))},HttpClient.prototype.post=function(url$$1,body,options){return void 0===options&&(options={}),this.request("POST",url$$1,addBody(options,body))},HttpClient.prototype.put=function(url$$1,body,options){return void 0===options&&(options={}),this.request("PUT",url$$1,addBody(options,body))},HttpClient.decorators=[{type:_angular_core.Injectable}],HttpClient.ctorParameters=function(){return[{type:HttpHandler}]},HttpClient}(),HttpInterceptorHandler=function(){function HttpInterceptorHandler(next,interceptor){this.next=next,this.interceptor=interceptor}return HttpInterceptorHandler.prototype.handle=function(req){return this.interceptor.intercept(req,this.next)},HttpInterceptorHandler}(),HTTP_INTERCEPTORS=new _angular_core.InjectionToken("HTTP_INTERCEPTORS"),NoopInterceptor=function(){function NoopInterceptor(){}return NoopInterceptor.prototype.intercept=function(req,next){return next.handle(req)},NoopInterceptor.decorators=[{type:_angular_core.Injectable}],NoopInterceptor.ctorParameters=function(){return[]},NoopInterceptor}(),XSSI_PREFIX=/^\)\]\}',?\n/,XhrFactory=function(){function XhrFactory(){}return XhrFactory}(),BrowserXhr$1=function(){function BrowserXhr$$1(){}return BrowserXhr$$1.prototype.build=function(){return new XMLHttpRequest},BrowserXhr$$1.decorators=[{type:_angular_core.Injectable}],BrowserXhr$$1.ctorParameters=function(){return[]},BrowserXhr$$1}(),HttpXhrBackend=function(){function HttpXhrBackend(xhrFactory){this.xhrFactory=xhrFactory}return HttpXhrBackend.prototype.handle=function(req){var _this=this;if("JSONP"===req.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new rxjs_Observable.Observable(function(observer){var xhr=_this.xhrFactory.build();if(xhr.open(req.method,req.urlWithParams),req.withCredentials&&(xhr.withCredentials=!0),req.headers.forEach(function(name,values){return xhr.setRequestHeader(name,values.join(","))}),req.headers.has("Accept")||xhr.setRequestHeader("Accept","application/json, text/plain, */*"),!req.headers.has("Content-Type")){var detectedType=req.detectContentTypeHeader();null!==detectedType&&xhr.setRequestHeader("Content-Type",detectedType)}if(req.responseType){var responseType=req.responseType.toLowerCase();xhr.responseType="json"!==responseType?responseType:"text"}var reqBody=req.serializeBody(),headerResponse=null,partialFromXhr=function(){if(null!==headerResponse)return headerResponse;var status=1223===xhr.status?204:xhr.status,statusText=xhr.statusText||"OK",headers=new HttpHeaders(xhr.getAllResponseHeaders()),url$$1=getResponseUrl(xhr)||req.url;return headerResponse=new HttpHeaderResponse({headers:headers,status:status,statusText:statusText,url:url$$1})},onLoad=function(){var _a=partialFromXhr(),headers=_a.headers,status=_a.status,statusText=_a.statusText,url$$1=_a.url,body=null;204!==status&&(body="undefined"==typeof xhr.response?xhr.responseText:xhr.response),0===status&&(status=body?200:0);var ok=status>=200&&status<300;if(ok&&"json"===req.responseType&&"string"==typeof body){body=body.replace(XSSI_PREFIX,"");try{body=JSON.parse(body)}catch(error){ok=!1,body={error:error,text:body}}}ok?(observer.next(new HttpResponse({body:body,headers:headers,status:status,statusText:statusText,url:url$$1||void 0})),observer.complete()):observer.error(new HttpErrorResponse({error:body,headers:headers,status:status,statusText:statusText,url:url$$1||void 0}))},onError=function(error){var res=new HttpErrorResponse({error:error,status:xhr.status||0,statusText:xhr.statusText||"Unknown Error"});observer.error(res)},sentHeaders=!1,onDownProgress=function(event){sentHeaders||(observer.next(partialFromXhr()),sentHeaders=!0);var progressEvent={type:HttpEventType.DownloadProgress,loaded:event.loaded};event.lengthComputable&&(progressEvent.total=event.total),"text"===req.responseType&&xhr.responseText&&(progressEvent.partialText=xhr.responseText),observer.next(progressEvent)},onUpProgress=function(event){var progress={type:HttpEventType.UploadProgress,loaded:event.loaded};event.lengthComputable&&(progress.total=event.total),observer.next(progress)};return xhr.addEventListener("load",onLoad),xhr.addEventListener("error",onError),req.reportProgress&&(xhr.addEventListener("progress",onDownProgress),null!==reqBody&&xhr.upload&&xhr.upload.addEventListener("progress",onUpProgress)),xhr.send(reqBody),observer.next({type:HttpEventType.Sent}),function(){xhr.removeEventListener("error",onError),xhr.removeEventListener("load",onLoad),req.reportProgress&&(xhr.removeEventListener("progress",onDownProgress),null!==reqBody&&xhr.upload&&xhr.upload.removeEventListener("progress",onUpProgress)),xhr.abort()}})},HttpXhrBackend.decorators=[{type:_angular_core.Injectable}],HttpXhrBackend.ctorParameters=function(){return[{type:XhrFactory}]},HttpXhrBackend}(),XSRF_COOKIE_NAME=new _angular_core.InjectionToken("XSRF_COOKIE_NAME"),XSRF_HEADER_NAME=new _angular_core.InjectionToken("XSRF_HEADER_NAME"),HttpXsrfTokenExtractor=function(){function HttpXsrfTokenExtractor(){}return HttpXsrfTokenExtractor}(),HttpXsrfCookieExtractor=function(){function HttpXsrfCookieExtractor(doc,platform,cookieName){this.doc=doc,this.platform=platform,this.cookieName=cookieName,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return HttpXsrfCookieExtractor.prototype.getToken=function(){if("server"===this.platform)return null;var cookieString=this.doc.cookie||"";return cookieString!==this.lastCookieString&&(this.parseCount++,this.lastToken=_angular_common.ɵparseCookieValue(cookieString,this.cookieName),this.lastCookieString=cookieString),this.lastToken},HttpXsrfCookieExtractor.decorators=[{type:_angular_core.Injectable}],HttpXsrfCookieExtractor.ctorParameters=function(){return[{type:void 0,decorators:[{type:_angular_core.Inject,args:[_angular_common.DOCUMENT]}]},{type:void 0,decorators:[{type:_angular_core.Inject,args:[_angular_core.PLATFORM_ID]}]},{type:void 0,decorators:[{type:_angular_core.Inject,args:[XSRF_COOKIE_NAME]}]}]},HttpXsrfCookieExtractor}(),HttpXsrfInterceptor=function(){function HttpXsrfInterceptor(tokenService,headerName){this.tokenService=tokenService,this.headerName=headerName}return HttpXsrfInterceptor.prototype.intercept=function(req,next){var lcUrl=req.url.toLowerCase();if("GET"===req.method||"HEAD"===req.method||lcUrl.startsWith("http://")||lcUrl.startsWith("https://"))return next.handle(req);var token=this.tokenService.getToken();return null===token||req.headers.has(this.headerName)||(req=req.clone({headers:req.headers.set(this.headerName,token)})),next.handle(req)},HttpXsrfInterceptor.decorators=[{type:_angular_core.Injectable}],HttpXsrfInterceptor.ctorParameters=function(){return[{type:HttpXsrfTokenExtractor},{type:void 0,decorators:[{type:_angular_core.Inject,args:[XSRF_HEADER_NAME]}]}]},HttpXsrfInterceptor}(),HttpClientXsrfModule=function(){function HttpClientXsrfModule(){}return HttpClientXsrfModule.disable=function(){return{ngModule:HttpClientXsrfModule,providers:[{provide:HttpXsrfInterceptor,useClass:NoopInterceptor}]}},HttpClientXsrfModule.withOptions=function(options){return void 0===options&&(options={}),{ngModule:HttpClientXsrfModule,providers:[options.cookieName?{provide:XSRF_COOKIE_NAME,useValue:options.cookieName}:[],options.headerName?{provide:XSRF_HEADER_NAME,useValue:options.headerName}:[]]}},HttpClientXsrfModule.decorators=[{type:_angular_core.NgModule,args:[{providers:[HttpXsrfInterceptor,{provide:HTTP_INTERCEPTORS,useExisting:HttpXsrfInterceptor,multi:!0},{provide:HttpXsrfTokenExtractor,useClass:HttpXsrfCookieExtractor},{provide:XSRF_COOKIE_NAME,useValue:"XSRF-TOKEN"},{provide:XSRF_HEADER_NAME,useValue:"X-XSRF-TOKEN"}]}]}],HttpClientXsrfModule.ctorParameters=function(){return[]},HttpClientXsrfModule}(),HttpClientModule=function(){function HttpClientModule(){}return HttpClientModule.decorators=[{type:_angular_core.NgModule,args:[{imports:[HttpClientXsrfModule.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})],providers:[HttpClient,{provide:HttpHandler,useFactory:interceptingHandler,deps:[HttpBackend,[new _angular_core.Optional,new _angular_core.Inject(HTTP_INTERCEPTORS)]]},HttpXhrBackend,{provide:HttpBackend,useExisting:HttpXhrBackend},BrowserXhr$1,{provide:XhrFactory,useExisting:BrowserXhr$1}]}]}],HttpClientModule.ctorParameters=function(){return[]},HttpClientModule}(),PlatformState=(require("parse5"),function(){function PlatformState(_doc){this._doc=_doc}return PlatformState.prototype.renderToString=function(){return _angular_platformBrowser.ɵgetDOM().getInnerHTML(this._doc)},PlatformState.prototype.getDocument=function(){return this._doc},PlatformState}());PlatformState.decorators=[{type:_angular_core.Injectable}],PlatformState.ctorParameters=function(){return[{type:void 0,decorators:[{type:_angular_core.Inject,args:[_angular_platformBrowser.DOCUMENT]}]}]};/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var xhr2=require("xhr2"),isAbsoluteUrl=/^[a-zA-Z\-\+.]+:\/\//,ServerXhr=function(){function ServerXhr(){}return ServerXhr.prototype.build=function(){return new xhr2.XMLHttpRequest},ServerXhr}();ServerXhr.decorators=[{type:_angular_core.Injectable}],ServerXhr.ctorParameters=function(){return[]};var ServerXsrfStrategy=function(){function ServerXsrfStrategy(){}return ServerXsrfStrategy.prototype.configureRequest=function(req){},ServerXsrfStrategy}();ServerXsrfStrategy.decorators=[{type:_angular_core.Injectable}],ServerXsrfStrategy.ctorParameters=function(){return[]};var ZoneMacroTaskWrapper=function(){function ZoneMacroTaskWrapper(){}return ZoneMacroTaskWrapper.prototype.wrap=function(request){var _this=this;return new rxjs_Observable.Observable(function(observer){var task=null,scheduled=!1,sub=null,savedResult=null,savedError=null,scheduleTask=function(_task){task=_task,scheduled=!0;var delegate=_this.delegate(request);sub=delegate.subscribe(function(res){return savedResult=res},function(err){if(!scheduled)throw new Error("An http observable was completed twice. This shouldn't happen, please file a bug.");savedError=err,scheduled=!1,task.invoke()},function(){if(!scheduled)throw new Error("An http observable was completed twice. This shouldn't happen, please file a bug.");scheduled=!1,task.invoke()})},cancelTask=function(_task){scheduled&&(scheduled=!1,sub&&(sub.unsubscribe(),sub=null))},onComplete=function(){null!==savedError?observer.error(savedError):(observer.next(savedResult),observer.complete())},_task=Zone.current.scheduleMacroTask("ZoneMacroTaskWrapper.subscribe",onComplete,{},function(){return null},cancelTask);return scheduleTask(_task),function(){scheduled&&task&&(task.zone.cancelTask(task),scheduled=!1),sub&&(sub.unsubscribe(),sub=null)}})},ZoneMacroTaskWrapper.prototype.delegate=function(request){},ZoneMacroTaskWrapper}(),ZoneMacroTaskConnection=function(_super){function ZoneMacroTaskConnection(request,backend){var _this=_super.call(this)||this;return _this.request=request,_this.backend=backend,validateRequestUrl(request.url),_this.response=_this.wrap(request),_this}return __extends(ZoneMacroTaskConnection,_super),ZoneMacroTaskConnection.prototype.delegate=function(request){return this.lastConnection=this.backend.createConnection(request),this.lastConnection.response},Object.defineProperty(ZoneMacroTaskConnection.prototype,"readyState",{get:function(){return this.lastConnection?this.lastConnection.readyState:_angular_http.ReadyState.Unsent},enumerable:!0,configurable:!0}),ZoneMacroTaskConnection}(ZoneMacroTaskWrapper),ZoneMacroTaskBackend=function(){function ZoneMacroTaskBackend(backend){this.backend=backend}return ZoneMacroTaskBackend.prototype.createConnection=function(request){return new ZoneMacroTaskConnection(request,this.backend)},ZoneMacroTaskBackend}(),ZoneClientBackend=function(_super){function ZoneClientBackend(backend){var _this=_super.call(this)||this;return _this.backend=backend,_this}return __extends(ZoneClientBackend,_super),ZoneClientBackend.prototype.handle=function(request){return this.wrap(request)},ZoneClientBackend.prototype.delegate=function(request){return this.backend.handle(request)},ZoneClientBackend}(ZoneMacroTaskWrapper),SERVER_HTTP_PROVIDERS=[{provide:_angular_http.Http,useFactory:httpFactory,deps:[_angular_http.XHRBackend,_angular_http.RequestOptions]},{provide:_angular_http.BrowserXhr,useClass:ServerXhr},{provide:_angular_http.XSRFStrategy,useClass:ServerXsrfStrategy},{provide:XhrFactory,useClass:ServerXhr},{provide:HttpHandler,useFactory:zoneWrappedInterceptingHandler,deps:[HttpBackend,[new _angular_core.Optional,HTTP_INTERCEPTORS]]}],INITIAL_CONFIG=new _angular_core.InjectionToken("Server.INITIAL_CONFIG"),ServerPlatformLocation=function(){function ServerPlatformLocation(_doc,_config){this._doc=_doc,this._path="/",this._search="",this._hash="",this._hashUpdate=new rxjs_Subject.Subject;var config=_config;if(config&&config.url){var parsedUrl=parseUrl(config.url);this._path=parsedUrl.pathname,this._search=parsedUrl.search,this._hash=parsedUrl.hash}}return ServerPlatformLocation.prototype.getBaseHrefFromDOM=function(){return _angular_platformBrowser.ɵgetDOM().getBaseHref(this._doc)},ServerPlatformLocation.prototype.onPopState=function(fn){},ServerPlatformLocation.prototype.onHashChange=function(fn){this._hashUpdate.subscribe(fn)},Object.defineProperty(ServerPlatformLocation.prototype,"pathname",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(ServerPlatformLocation.prototype,"search",{get:function(){return this._search},enumerable:!0,configurable:!0}),Object.defineProperty(ServerPlatformLocation.prototype,"hash",{get:function(){return this._hash},enumerable:!0,configurable:!0}),Object.defineProperty(ServerPlatformLocation.prototype,"url",{get:function(){return""+this.pathname+this.search+this.hash},enumerable:!0,configurable:!0}),ServerPlatformLocation.prototype.setHash=function(value,oldUrl){var _this=this;if(this._hash!==value){this._hash=value;var newUrl=this.url;scheduleMicroTask(function(){return _this._hashUpdate.next({type:"hashchange",oldUrl:oldUrl,newUrl:newUrl})})}},ServerPlatformLocation.prototype.replaceState=function(state,title,newUrl){var oldUrl=this.url,parsedUrl=parseUrl(newUrl);this._path=parsedUrl.pathname,this._search=parsedUrl.search,this.setHash(parsedUrl.hash,oldUrl)},ServerPlatformLocation.prototype.pushState=function(state,title,newUrl){this.replaceState(state,title,newUrl)},ServerPlatformLocation.prototype.forward=function(){throw new Error("Not implemented")},ServerPlatformLocation.prototype.back=function(){throw new Error("Not implemented")},ServerPlatformLocation}();ServerPlatformLocation.decorators=[{type:_angular_core.Injectable}],ServerPlatformLocation.ctorParameters=function(){return[{type:void 0,decorators:[{type:_angular_core.Inject,args:[_angular_platformBrowser.DOCUMENT]}]},{type:void 0,decorators:[{type:_angular_core.Optional},{type:_angular_core.Inject,args:[INITIAL_CONFIG]}]}]};/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var treeAdapter,parse5$1=require("parse5"),_attrToPropMap={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},mapProps=["attribs","x-attribsNamespace","x-attribsPrefix"],Parse5DomAdapter=function(_super){function Parse5DomAdapter(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Parse5DomAdapter,_super),Parse5DomAdapter.makeCurrent=function(){treeAdapter=parse5$1.treeAdapters.htmlparser2,_angular_platformBrowser.ɵsetRootDomAdapter(new Parse5DomAdapter)},Parse5DomAdapter.prototype.contains=function(nodeA,nodeB){for(var inner=nodeB;inner;){if(inner===nodeA)return!0;inner=inner.parent}return!1},Parse5DomAdapter.prototype.hasProperty=function(element,name){return _HTMLElementPropertyList.indexOf(name)>-1},Parse5DomAdapter.prototype.setProperty=function(el,name,value){"innerHTML"===name?this.setInnerHTML(el,value):"innerText"===name?this.setText(el,value):"className"===name?el.attribs.class=el.className=value:(el.properties=el.properties||{},el.properties[name]=value)},Parse5DomAdapter.prototype.getProperty=function(el,name){return el.properties?el.properties[name]:void 0},Parse5DomAdapter.prototype.logError=function(error){console.error(error)},Parse5DomAdapter.prototype.log=function(error){console.log(error)},Parse5DomAdapter.prototype.logGroup=function(error){console.error(error)},Parse5DomAdapter.prototype.logGroupEnd=function(){},Object.defineProperty(Parse5DomAdapter.prototype,"attrToPropMap",{get:function(){return _attrToPropMap},enumerable:!0,configurable:!0}),Parse5DomAdapter.prototype.querySelector=function(el,selector){return this.querySelectorAll(el,selector)[0]||null},Parse5DomAdapter.prototype.querySelectorAll=function(el,selector){var _this=this,res=[],_recursive=function(result,node,selector,matcher){var cNodes=node.childNodes;if(cNodes&&cNodes.length>0)for(var i=0;i<cNodes.length;i++){var childNode=cNodes[i];_this.elementMatches(childNode,selector,matcher)&&result.push(childNode),_recursive(result,childNode,selector,matcher)}},matcher=new _angular_compiler.SelectorMatcher;return matcher.addSelectables(_angular_compiler.CssSelector.parse(selector)),_recursive(res,el,selector,matcher),res},Parse5DomAdapter.prototype.elementMatches=function(node,selector,matcher){if(void 0===matcher&&(matcher=null),this.isElementNode(node)&&"*"===selector)return!0;var result=!1;if(selector&&"#"==selector.charAt(0))result=this.getAttribute(node,"id")==selector.substring(1);else if(selector){matcher||(matcher=new _angular_compiler.SelectorMatcher,matcher.addSelectables(_angular_compiler.CssSelector.parse(selector)));var cssSelector=new _angular_compiler.CssSelector;if(cssSelector.setElement(this.tagName(node)),node.attribs)for(var attrName in node.attribs)cssSelector.addAttribute(attrName,node.attribs[attrName]);for(var classList=this.classList(node),i=0;i<classList.length;i++)cssSelector.addClassName(classList[i]);matcher.match(cssSelector,function(selector,cb){result=!0})}return result},Parse5DomAdapter.prototype.on=function(el,evt,listener){var listenersMap=el._eventListenersMap;listenersMap||(listenersMap={},el._eventListenersMap=listenersMap);var listeners=listenersMap[evt]||[];listenersMap[evt]=listeners.concat([listener])},Parse5DomAdapter.prototype.onAndCancel=function(el,evt,listener){return this.on(el,evt,listener),function(){remove(el._eventListenersMap[evt],listener)}},Parse5DomAdapter.prototype.dispatchEvent=function(el,evt){if(evt.target||(evt.target=el),el._eventListenersMap){var listeners=el._eventListenersMap[evt.type];if(listeners)for(var i=0;i<listeners.length;i++)listeners[i](evt)}el.parent&&this.dispatchEvent(el.parent,evt),el._window&&this.dispatchEvent(el._window,evt)},Parse5DomAdapter.prototype.createMouseEvent=function(eventType){return this.createEvent(eventType)},Parse5DomAdapter.prototype.createEvent=function(eventType){var event={type:eventType,defaultPrevented:!1,preventDefault:function(){event.defaultPrevented=!0}};return event},Parse5DomAdapter.prototype.preventDefault=function(event){event.returnValue=!1},Parse5DomAdapter.prototype.isPrevented=function(event){return null!=event.returnValue&&!event.returnValue},Parse5DomAdapter.prototype.getInnerHTML=function(el){return parse5$1.serialize(this.templateAwareRoot(el),{treeAdapter:treeAdapter})},Parse5DomAdapter.prototype.getTemplateContent=function(el){return null},Parse5DomAdapter.prototype.getOuterHTML=function(el){var fragment=treeAdapter.createDocumentFragment();return this.appendChild(fragment,el),parse5$1.serialize(fragment,{treeAdapter:treeAdapter})},Parse5DomAdapter.prototype.nodeName=function(node){return node.tagName},Parse5DomAdapter.prototype.nodeValue=function(node){return node.nodeValue},Parse5DomAdapter.prototype.type=function(node){throw _notImplemented("type")},Parse5DomAdapter.prototype.content=function(node){return node.childNodes[0]},Parse5DomAdapter.prototype.firstChild=function(el){return el.firstChild},Parse5DomAdapter.prototype.nextSibling=function(el){return el.nextSibling},Parse5DomAdapter.prototype.parentElement=function(el){return el.parent},Parse5DomAdapter.prototype.childNodes=function(el){return el.childNodes},Parse5DomAdapter.prototype.childNodesAsList=function(el){for(var childNodes=el.childNodes,res=new Array(childNodes.length),i=0;i<childNodes.length;i++)res[i]=childNodes[i];return res},Parse5DomAdapter.prototype.clearNodes=function(el){for(;el.childNodes.length>0;)this.remove(el.childNodes[0])},Parse5DomAdapter.prototype.appendChild=function(el,node){this.remove(node),treeAdapter.appendChild(this.templateAwareRoot(el),node)},Parse5DomAdapter.prototype.removeChild=function(el,node){el.childNodes.indexOf(node)>-1&&this.remove(node)},Parse5DomAdapter.prototype.remove=function(el){var parent=el.parent;if(parent){var index=parent.childNodes.indexOf(el);parent.childNodes.splice(index,1)}var prev=el.previousSibling,next=el.nextSibling;return prev&&(prev.next=next),next&&(next.prev=prev),el.prev=null,el.next=null,el.parent=null,el},Parse5DomAdapter.prototype.insertBefore=function(parent,ref,newNode){this.remove(newNode),ref?treeAdapter.insertBefore(parent,newNode,ref):this.appendChild(parent,newNode)},Parse5DomAdapter.prototype.insertAllBefore=function(parent,ref,nodes){var _this=this;nodes.forEach(function(n){return _this.insertBefore(parent,ref,n)})},Parse5DomAdapter.prototype.insertAfter=function(parent,ref,node){ref.nextSibling?this.insertBefore(parent,ref.nextSibling,node):this.appendChild(parent,node)},Parse5DomAdapter.prototype.setInnerHTML=function(el,value){this.clearNodes(el);for(var content=parse5$1.parseFragment(value,{treeAdapter:treeAdapter}),i=0;i<content.childNodes.length;i++)treeAdapter.appendChild(el,content.childNodes[i])},Parse5DomAdapter.prototype.getText=function(el,isRecursive){if(this.isTextNode(el))return el.data;if(this.isCommentNode(el))return isRecursive?"":el.data;if(!el.childNodes||0==el.childNodes.length)return"";for(var textContent="",i=0;i<el.childNodes.length;i++)textContent+=this.getText(el.childNodes[i],!0);return textContent},Parse5DomAdapter.prototype.setText=function(el,value){this.isTextNode(el)||this.isCommentNode(el)?el.data=value:(this.clearNodes(el),""!==value&&treeAdapter.insertText(el,value))},Parse5DomAdapter.prototype.getValue=function(el){return el.value},Parse5DomAdapter.prototype.setValue=function(el,value){el.value=value},Parse5DomAdapter.prototype.getChecked=function(el){return el.checked},Parse5DomAdapter.prototype.setChecked=function(el,value){el.checked=value},Parse5DomAdapter.prototype.createComment=function(text){return treeAdapter.createCommentNode(text)},Parse5DomAdapter.prototype.createTemplate=function(html){var template=treeAdapter.createElement("template","http://www.w3.org/1999/xhtml",[]),content=parse5$1.parseFragment(html,{treeAdapter:treeAdapter});return treeAdapter.setTemplateContent(template,content),template},Parse5DomAdapter.prototype.createElement=function(tagName){return treeAdapter.createElement(tagName,"http://www.w3.org/1999/xhtml",[])},Parse5DomAdapter.prototype.createElementNS=function(ns,tagName){return treeAdapter.createElement(tagName,ns,[])},Parse5DomAdapter.prototype.createTextNode=function(text){var t=this.createComment(text);return t.type="text",t},Parse5DomAdapter.prototype.createScriptTag=function(attrName,attrValue){return treeAdapter.createElement("script","http://www.w3.org/1999/xhtml",[{name:attrName,value:attrValue}])},Parse5DomAdapter.prototype.createStyleElement=function(css){var style=this.createElement("style");return this.setText(style,css),style},Parse5DomAdapter.prototype.createShadowRoot=function(el){return el.shadowRoot=treeAdapter.createDocumentFragment(),el.shadowRoot.parent=el,el.shadowRoot},Parse5DomAdapter.prototype.getShadowRoot=function(el){return el.shadowRoot},Parse5DomAdapter.prototype.getHost=function(el){return el.host},Parse5DomAdapter.prototype.getDistributedNodes=function(el){throw _notImplemented("getDistributedNodes")},Parse5DomAdapter.prototype.clone=function(node){var _recursive=function(node){var nodeClone=Object.create(Object.getPrototypeOf(node));for(var prop in node){var desc=Object.getOwnPropertyDescriptor(node,prop);desc&&"value"in desc&&"object"!=typeof desc.value&&(nodeClone[prop]=node[prop])}nodeClone.parent=null,nodeClone.prev=null,nodeClone.next=null,nodeClone.children=null,mapProps.forEach(function(mapName){if(null!=node[mapName]){nodeClone[mapName]={};for(var prop in node[mapName])nodeClone[mapName][prop]=node[mapName][prop]}});var cNodes=node.children;if(cNodes){for(var cNodesClone=new Array(cNodes.length),i=0;i<cNodes.length;i++){var childNode=cNodes[i],childNodeClone=_recursive(childNode);cNodesClone[i]=childNodeClone,i>0&&(childNodeClone.prev=cNodesClone[i-1],cNodesClone[i-1].next=childNodeClone),childNodeClone.parent=nodeClone}nodeClone.children=cNodesClone}return nodeClone};return _recursive(node)},Parse5DomAdapter.prototype.getElementsByClassName=function(element,name){return this.querySelectorAll(element,"."+name)},Parse5DomAdapter.prototype.getElementsByTagName=function(element,name){return this.querySelectorAll(element,name)},Parse5DomAdapter.prototype.classList=function(element){var classAttrValue=null,attributes=element.attribs;return attributes&&null!=attributes.class&&(classAttrValue=attributes.class),classAttrValue?classAttrValue.trim().split(/\s+/g):[]},Parse5DomAdapter.prototype.addClass=function(element,className){var classList=this.classList(element),index=classList.indexOf(className);index==-1&&(classList.push(className),element.attribs.class=element.className=classList.join(" "))},Parse5DomAdapter.prototype.removeClass=function(element,className){var classList=this.classList(element),index=classList.indexOf(className);index>-1&&(classList.splice(index,1),element.attribs.class=element.className=classList.join(" "))},Parse5DomAdapter.prototype.hasClass=function(element,className){return this.classList(element).indexOf(className)>-1},Parse5DomAdapter.prototype.hasStyle=function(element,styleName,styleValue){var value=this.getStyle(element,styleName)||"";return styleValue?value==styleValue:value.length>0},Parse5DomAdapter.prototype._readStyleAttribute=function(element){var styleMap={},attributes=element.attribs;if(attributes&&null!=attributes.style)for(var styleAttrValue=attributes.style,styleList=styleAttrValue.split(/;+/g),i=0;i<styleList.length;i++)if(styleList[i].length>0){var style=styleList[i],colon=style.indexOf(":");if(colon===-1)throw new Error("Invalid CSS style: "+style);styleMap[style.substr(0,colon).trim()]=style.substr(colon+1).trim()}return styleMap},Parse5DomAdapter.prototype._writeStyleAttribute=function(element,styleMap){var styleAttrValue="";for(var key in styleMap){var newValue=styleMap[key];newValue&&(styleAttrValue+=key+":"+styleMap[key]+";")}element.attribs.style=styleAttrValue},Parse5DomAdapter.prototype.setStyle=function(element,styleName,styleValue){var styleMap=this._readStyleAttribute(element);styleMap[styleName]=styleValue,this._writeStyleAttribute(element,styleMap)},Parse5DomAdapter.prototype.removeStyle=function(element,styleName){this.setStyle(element,styleName,null)},Parse5DomAdapter.prototype.getStyle=function(element,styleName){var styleMap=this._readStyleAttribute(element);return styleMap.hasOwnProperty(styleName)?styleMap[styleName]:""},Parse5DomAdapter.prototype.tagName=function(element){return"style"==element.tagName?"STYLE":element.tagName},Parse5DomAdapter.prototype.attributeMap=function(element){for(var res=new Map,elAttrs=treeAdapter.getAttrList(element),i=0;i<elAttrs.length;i++){var attrib=elAttrs[i];res.set(attrib.name,attrib.value)}return res},Parse5DomAdapter.prototype.hasAttribute=function(element,attribute){return element.attribs&&null!=element.attribs[attribute]},Parse5DomAdapter.prototype.hasAttributeNS=function(element,ns,attribute){return this.hasAttribute(element,attribute)},Parse5DomAdapter.prototype.getAttribute=function(element,attribute){return this.hasAttribute(element,attribute)?element.attribs[attribute]:null},Parse5DomAdapter.prototype.getAttributeNS=function(element,ns,attribute){return this.getAttribute(element,attribute)},Parse5DomAdapter.prototype.setAttribute=function(element,attribute,value){attribute&&(element.attribs[attribute]=value,"class"===attribute&&(element.className=value))},Parse5DomAdapter.prototype.setAttributeNS=function(element,ns,attribute,value){this.setAttribute(element,attribute,value)},Parse5DomAdapter.prototype.removeAttribute=function(element,attribute){attribute&&delete element.attribs[attribute]},Parse5DomAdapter.prototype.removeAttributeNS=function(element,ns,name){throw"not implemented"},Parse5DomAdapter.prototype.templateAwareRoot=function(el){return this.isTemplateElement(el)?treeAdapter.getTemplateContent(el):el},Parse5DomAdapter.prototype.createHtmlDocument=function(){var newDoc=treeAdapter.createDocument();newDoc.title="fakeTitle";var head=treeAdapter.createElement("head",null,[]),body=treeAdapter.createElement("body","http://www.w3.org/1999/xhtml",[]);return this.appendChild(newDoc,head),this.appendChild(newDoc,body),newDoc.head=head,newDoc.body=body,newDoc._window={},newDoc},Parse5DomAdapter.prototype.getBoundingClientRect=function(el){return{left:0,top:0,width:0,height:0}},Parse5DomAdapter.prototype.getTitle=function(doc){return this.getText(this.getTitleNode(doc))||""},Parse5DomAdapter.prototype.setTitle=function(doc,newTitle){this.setText(this.getTitleNode(doc),newTitle||"")},Parse5DomAdapter.prototype.isTemplateElement=function(el){return this.isElementNode(el)&&"template"===this.tagName(el)},Parse5DomAdapter.prototype.isTextNode=function(node){return treeAdapter.isTextNode(node)},Parse5DomAdapter.prototype.isCommentNode=function(node){return treeAdapter.isCommentNode(node)},Parse5DomAdapter.prototype.isElementNode=function(node){return!!node&&treeAdapter.isElementNode(node)},Parse5DomAdapter.prototype.hasShadowRoot=function(node){return null!=node.shadowRoot},Parse5DomAdapter.prototype.isShadowRoot=function(node){return this.getShadowRoot(node)==node},Parse5DomAdapter.prototype.importIntoDoc=function(node){return this.clone(node)},Parse5DomAdapter.prototype.adoptNode=function(node){return node},Parse5DomAdapter.prototype.getHref=function(el){return this.getAttribute(el,"href")},Parse5DomAdapter.prototype.resolveAndSetHref=function(el,baseUrl,href){null==href?el.href=baseUrl:el.href=baseUrl+"/../"+href},Parse5DomAdapter.prototype._buildRules=function(parsedRules,css){for(var rules=[],i=0;i<parsedRules.length;i++){var parsedRule=parsedRules[i],rule={};if(rule.cssText=css,rule.style={content:"",cssText:""},"rule"==parsedRule.type){if(rule.type=1,rule.selectorText=parsedRule.selectors.join(", ".replace(/\s{2,}/g," ").replace(/\s*~\s*/g," ~ ").replace(/\s*\+\s*/g," + ").replace(/\s*>\s*/g," > ").replace(/\[(\w+)=(\w+)\]/g,'[$1="$2"]')),null==parsedRule.declarations)continue;for(var j=0;j<parsedRule.declarations.length;j++){var declaration=parsedRule.declarations[j];rule.style=declaration.property[declaration.value],rule.style.cssText+=declaration.property+": "+declaration.value+";"}}else"media"==parsedRule.type&&(rule.type=4,rule.media={mediaText:parsedRule.media},parsedRule.rules&&(rule.cssRules=this._buildRules(parsedRule.rules)));rules.push(rule)}return rules},Parse5DomAdapter.prototype.supportsDOMEvents=function(){return!1},Parse5DomAdapter.prototype.supportsNativeShadowDOM=function(){return!1},Parse5DomAdapter.prototype.getGlobalEventTarget=function(doc,target){return"window"==target?doc._window:"document"==target?doc:"body"==target?doc.body:void 0},Parse5DomAdapter.prototype.getBaseHref=function(doc){var base=this.querySelector(doc,"base"),href="";return base&&(href=this.getHref(base)),null==href?null:href},Parse5DomAdapter.prototype.resetBaseElement=function(){throw"not implemented"},Parse5DomAdapter.prototype.getHistory=function(){throw"not implemented"},Parse5DomAdapter.prototype.getLocation=function(){throw"not implemented"},Parse5DomAdapter.prototype.getUserAgent=function(){return"Fake user agent"},Parse5DomAdapter.prototype.getData=function(el,name){return this.getAttribute(el,"data-"+name)},Parse5DomAdapter.prototype.getComputedStyle=function(el){throw"not implemented"},Parse5DomAdapter.prototype.setData=function(el,name,value){this.setAttribute(el,"data-"+name,value)},Parse5DomAdapter.prototype.supportsWebAnimation=function(){return!1},Parse5DomAdapter.prototype.performanceNow=function(){return Date.now()},Parse5DomAdapter.prototype.getAnimationPrefix=function(){return""},Parse5DomAdapter.prototype.getTransitionEnd=function(){return"transitionend"},Parse5DomAdapter.prototype.supportsAnimation=function(){return!0},Parse5DomAdapter.prototype.replaceChild=function(el,newNode,oldNode){throw new Error("not implemented")},Parse5DomAdapter.prototype.parse=function(templateHtml){throw new Error("not implemented")},Parse5DomAdapter.prototype.invoke=function(el,methodName,args){throw new Error("not implemented")},Parse5DomAdapter.prototype.getEventKey=function(event){throw new Error("not implemented")},Parse5DomAdapter.prototype.supportsCookies=function(){return!1},Parse5DomAdapter.prototype.getCookie=function(name){throw new Error("not implemented")},Parse5DomAdapter.prototype.setCookie=function(name,value){throw new Error("not implemented")},Parse5DomAdapter.prototype.animate=function(element,keyframes,options){throw new Error("not implemented")},Parse5DomAdapter.prototype.getTitleNode=function(doc){var title=this.querySelector(doc,"title");return title||(title=this.createElement("title"),this.appendChild(this.querySelector(doc,"head"),title)),title},Parse5DomAdapter}(_angular_platformBrowser.ɵDomAdapter),_HTMLElementPropertyList=["webkitEntries","incremental","webkitdirectory","selectionDirection","selectionEnd","selectionStart","labels","validationMessage","validity","willValidate","width","valueAsNumber","valueAsDate","value","useMap","defaultValue","type","step","src","size","required","readOnly","placeholder","pattern","name","multiple","min","minLength","maxLength","max","list","indeterminate","height","formTarget","formNoValidate","formMethod","formEnctype","formAction","files","form","disabled","dirName","checked","defaultChecked","autofocus","autocomplete","alt","align","accept","onautocompleteerror","onautocomplete","onwaiting","onvolumechange","ontoggle","ontimeupdate","onsuspend","onsubmit","onstalled","onshow","onselect","onseeking","onseeked","onscroll","onresize","onreset","onratechange","onprogress","onplaying","onplay","onpause","onmousewheel","onmouseup","onmouseover","onmouseout","onmousemove","onmouseleave","onmouseenter","onmousedown","onloadstart","onloadedmetadata","onloadeddata","onload","onkeyup","onkeypress","onkeydown","oninvalid","oninput","onfocus","onerror","onended","onemptied","ondurationchange","ondrop","ondragstart","ondragover","ondragleave","ondragenter","ondragend","ondrag","ondblclick","oncuechange","oncontextmenu","onclose","onclick","onchange","oncanplaythrough","oncanplay","oncancel","onblur","onabort","spellcheck","isContentEditable","contentEditable","outerText","innerText","accessKey","hidden","webkitdropzone","draggable","tabIndex","dir","translate","lang","title","childElementCount","lastElementChild","firstElementChild","children","onwebkitfullscreenerror","onwebkitfullscreenchange","nextElementSibling","previousElementSibling","onwheel","onselectstart","onsearch","onpaste","oncut","oncopy","onbeforepaste","onbeforecut","onbeforecopy","shadowRoot","dataset","classList","className","outerHTML","innerHTML","scrollHeight","scrollWidth","scrollTop","scrollLeft","clientHeight","clientWidth","clientTop","clientLeft","offsetParent","offsetHeight","offsetWidth","offsetTop","offsetLeft","localName","prefix","namespaceURI","id","style","attributes","tagName","parentElement","textContent","baseURI","ownerDocument","nextSibling","previousSibling","lastChild","firstChild","childNodes","parentNode","nodeType","nodeValue","nodeName","closure_lm_714617","__jsaction"],EMPTY_ARRAY=[],ServerRendererFactory2=function(){function ServerRendererFactory2(ngZone,document,sharedStylesHost){this.ngZone=ngZone,this.document=document,this.sharedStylesHost=sharedStylesHost,this.rendererByCompId=new Map,this.schema=new _angular_compiler.DomElementSchemaRegistry,this.defaultRenderer=new DefaultServerRenderer2(document,ngZone,this.schema)}return ServerRendererFactory2.prototype.createRenderer=function(element,type){if(!element||!type)return this.defaultRenderer;switch(type.encapsulation){case _angular_core.ViewEncapsulation.Native:case _angular_core.ViewEncapsulation.Emulated:var renderer=this.rendererByCompId.get(type.id);return renderer||(renderer=new EmulatedEncapsulationServerRenderer2(this.document,this.ngZone,this.sharedStylesHost,this.schema,type),this.rendererByCompId.set(type.id,renderer)),renderer.applyToHost(element),renderer;case _angular_core.ViewEncapsulation.Native:throw new Error("Native encapsulation is not supported on the server!");default:if(!this.rendererByCompId.has(type.id)){var styles=_angular_platformBrowser.ɵflattenStyles(type.id,type.styles,[]);this.sharedStylesHost.addStyles(styles),this.rendererByCompId.set(type.id,this.defaultRenderer)}return this.defaultRenderer}},ServerRendererFactory2.prototype.begin=function(){},ServerRendererFactory2.prototype.end=function(){},ServerRendererFactory2}();ServerRendererFactory2.decorators=[{type:_angular_core.Injectable}],ServerRendererFactory2.ctorParameters=function(){return[{type:_angular_core.NgZone},{type:void 0,decorators:[{type:_angular_core.Inject,args:[_angular_platformBrowser.DOCUMENT]}]},{type:_angular_platformBrowser.ɵSharedStylesHost}]};var DefaultServerRenderer2=function(){function DefaultServerRenderer2(document,ngZone,schema){this.document=document,this.ngZone=ngZone,this.schema=schema,this.data=Object.create(null)}return DefaultServerRenderer2.prototype.destroy=function(){},DefaultServerRenderer2.prototype.createElement=function(name,namespace,debugInfo){return namespace?_angular_platformBrowser.ɵgetDOM().createElementNS(_angular_platformBrowser.ɵNAMESPACE_URIS[namespace],name):_angular_platformBrowser.ɵgetDOM().createElement(name)},DefaultServerRenderer2.prototype.createComment=function(value,debugInfo){return _angular_platformBrowser.ɵgetDOM().createComment(value)},DefaultServerRenderer2.prototype.createText=function(value,debugInfo){return _angular_platformBrowser.ɵgetDOM().createTextNode(value)},DefaultServerRenderer2.prototype.appendChild=function(parent,newChild){_angular_platformBrowser.ɵgetDOM().appendChild(parent,newChild)},DefaultServerRenderer2.prototype.insertBefore=function(parent,newChild,refChild){parent&&_angular_platformBrowser.ɵgetDOM().insertBefore(parent,refChild,newChild)},DefaultServerRenderer2.prototype.removeChild=function(parent,oldChild){parent&&_angular_platformBrowser.ɵgetDOM().removeChild(parent,oldChild)},DefaultServerRenderer2.prototype.selectRootElement=function(selectorOrNode,debugInfo){var el;if("string"==typeof selectorOrNode){if(el=_angular_platformBrowser.ɵgetDOM().querySelector(this.document,selectorOrNode),!el)throw new Error('The selector "'+selectorOrNode+'" did not match any elements')}else el=selectorOrNode;return _angular_platformBrowser.ɵgetDOM().clearNodes(el),el},DefaultServerRenderer2.prototype.parentNode=function(node){return _angular_platformBrowser.ɵgetDOM().parentElement(node)},DefaultServerRenderer2.prototype.nextSibling=function(node){return _angular_platformBrowser.ɵgetDOM().nextSibling(node)},DefaultServerRenderer2.prototype.setAttribute=function(el,name,value,namespace){namespace?_angular_platformBrowser.ɵgetDOM().setAttributeNS(el,_angular_platformBrowser.ɵNAMESPACE_URIS[namespace],namespace+":"+name,value):_angular_platformBrowser.ɵgetDOM().setAttribute(el,name,value)},DefaultServerRenderer2.prototype.removeAttribute=function(el,name,namespace){namespace?_angular_platformBrowser.ɵgetDOM().removeAttributeNS(el,_angular_platformBrowser.ɵNAMESPACE_URIS[namespace],name):_angular_platformBrowser.ɵgetDOM().removeAttribute(el,name)},DefaultServerRenderer2.prototype.addClass=function(el,name){_angular_platformBrowser.ɵgetDOM().addClass(el,name)},DefaultServerRenderer2.prototype.removeClass=function(el,name){_angular_platformBrowser.ɵgetDOM().removeClass(el,name)},DefaultServerRenderer2.prototype.setStyle=function(el,style,value,flags){_angular_platformBrowser.ɵgetDOM().setStyle(el,style,value)},DefaultServerRenderer2.prototype.removeStyle=function(el,style,flags){_angular_platformBrowser.ɵgetDOM().removeStyle(el,style)},DefaultServerRenderer2.prototype._isSafeToReflectProperty=function(tagName,propertyName){return this.schema.securityContext(tagName,propertyName,!0)===this.schema.securityContext(tagName,propertyName,!1)},DefaultServerRenderer2.prototype.setProperty=function(el,name,value){checkNoSyntheticProp(name,"property"),_angular_platformBrowser.ɵgetDOM().setProperty(el,name,value);var tagName=el.tagName.toLowerCase();null!=value&&("number"==typeof value||"string"==typeof value)&&this.schema.hasElement(tagName,EMPTY_ARRAY)&&this.schema.hasProperty(tagName,name,EMPTY_ARRAY)&&this._isSafeToReflectProperty(tagName,name)&&this.setAttribute(el,name,value.toString())},DefaultServerRenderer2.prototype.setValue=function(node,value){_angular_platformBrowser.ɵgetDOM().setText(node,value)},DefaultServerRenderer2.prototype.listen=function(target,eventName,callback){var _this=this;checkNoSyntheticProp(eventName,"listener");var el="string"==typeof target?_angular_platformBrowser.ɵgetDOM().getGlobalEventTarget(this.document,target):target,outsideHandler=function(event){return _this.ngZone.runGuarded(function(){return callback(event)})};return this.ngZone.runOutsideAngular(function(){return _angular_platformBrowser.ɵgetDOM().onAndCancel(el,eventName,outsideHandler)})},DefaultServerRenderer2}(),AT_CHARCODE="@".charCodeAt(0),EmulatedEncapsulationServerRenderer2=function(_super){function EmulatedEncapsulationServerRenderer2(document,ngZone,sharedStylesHost,schema,component){var _this=_super.call(this,document,ngZone,schema)||this;_this.component=component;var styles=_angular_platformBrowser.ɵflattenStyles(component.id,component.styles,[]);return sharedStylesHost.addStyles(styles),_this.contentAttr=_angular_platformBrowser.ɵshimContentAttribute(component.id),_this.hostAttr=_angular_platformBrowser.ɵshimHostAttribute(component.id),_this}return __extends(EmulatedEncapsulationServerRenderer2,_super),EmulatedEncapsulationServerRenderer2.prototype.applyToHost=function(element){_super.prototype.setAttribute.call(this,element,this.hostAttr,"")},EmulatedEncapsulationServerRenderer2.prototype.createElement=function(parent,name){var el=_super.prototype.createElement.call(this,parent,name);return _super.prototype.setAttribute.call(this,el,this.contentAttr,""),el},EmulatedEncapsulationServerRenderer2}(DefaultServerRenderer2),ServerStylesHost=function(_super){function ServerStylesHost(doc,transitionId){var _this=_super.call(this)||this;return _this.doc=doc,_this.transitionId=transitionId,_this.head=null,_this.head=_angular_platformBrowser.ɵgetDOM().getElementsByTagName(doc,"head")[0],_this}return __extends(ServerStylesHost,_super),ServerStylesHost.prototype._addStyle=function(style){var adapter=_angular_platformBrowser.ɵgetDOM(),el=adapter.createElement("style");adapter.setText(el,style),this.transitionId&&adapter.setAttribute(el,"ng-transition",this.transitionId),adapter.appendChild(this.head,el)},ServerStylesHost.prototype.onStylesAdded=function(additions){var _this=this;additions.forEach(function(style){return _this._addStyle(style)})},ServerStylesHost}(_angular_platformBrowser.ɵSharedStylesHost);ServerStylesHost.decorators=[{type:_angular_core.Injectable}],ServerStylesHost.ctorParameters=function(){return[{type:void 0,decorators:[{type:_angular_core.Inject,args:[_angular_platformBrowser.DOCUMENT]}]},{type:void 0,decorators:[{type:_angular_core.Optional},{type:_angular_core.Inject,args:[_angular_platformBrowser.ɵTRANSITION_ID]}]}]};/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var INTERNAL_SERVER_PLATFORM_PROVIDERS=[{provide:_angular_platformBrowser.DOCUMENT,useFactory:_document,deps:[_angular_core.Injector]},{provide:_angular_core.PLATFORM_ID,useValue:_angular_common.ɵPLATFORM_SERVER_ID},{provide:_angular_core.PLATFORM_INITIALIZER,useFactory:initParse5Adapter,multi:!0,deps:[_angular_core.Injector]},{provide:_angular_common.PlatformLocation,useClass:ServerPlatformLocation},PlatformState,{provide:_angular_core.ɵALLOW_MULTIPLE_PLATFORMS,useValue:!0}],SERVER_RENDER_PROVIDERS=[ServerRendererFactory2,{provide:_angular_core.RendererFactory2,useFactory:instantiateServerRendererFactory,deps:[ServerRendererFactory2,AnimationEngine,_angular_core.NgZone]},ServerStylesHost,{provide:_angular_platformBrowser.ɵSharedStylesHost,useExisting:ServerStylesHost}],ServerModule=function(){function ServerModule(){}return ServerModule}();ServerModule.decorators=[{type:_angular_core.NgModule,args:[{exports:[_angular_platformBrowser.BrowserModule],imports:[_angular_http.HttpModule,HttpClientModule,_angular_platformBrowser_animations.NoopAnimationsModule],providers:[SERVER_RENDER_PROVIDERS,SERVER_HTTP_PROVIDERS,{provide:_angular_core.Testability,useValue:null}]}]}],ServerModule.ctorParameters=function(){return[]};var platformServer=_angular_core.createPlatformFactory(_angular_core.platformCore,"server",INTERNAL_SERVER_PLATFORM_PROVIDERS),platformDynamicServer=_angular_core.createPlatformFactory(_angular_compiler.platformCoreDynamic,"serverDynamic",INTERNAL_SERVER_PLATFORM_PROVIDERS),VERSION=(require("parse5"),new _angular_core.Version("4.4.1"));exports.PlatformState=PlatformState,exports.ServerModule=ServerModule,exports.platformDynamicServer=platformDynamicServer,exports.platformServer=platformServer,exports.INITIAL_CONFIG=INITIAL_CONFIG,exports.renderModule=renderModule,exports.renderModuleFactory=renderModuleFactory,exports.VERSION=VERSION,exports.ɵINTERNAL_SERVER_PLATFORM_PROVIDERS=INTERNAL_SERVER_PLATFORM_PROVIDERS,exports.ɵSERVER_RENDER_PROVIDERS=SERVER_RENDER_PROVIDERS,exports.ɵServerRendererFactory2=ServerRendererFactory2,exports.ɵg=SERVER_HTTP_PROVIDERS,exports.ɵc=ServerXhr,exports.ɵd=ServerXsrfStrategy,exports.ɵe=httpFactory,exports.ɵf=zoneWrappedInterceptingHandler,exports.ɵa=instantiateServerRendererFactory,exports.ɵb=ServerStylesHost,Object.defineProperty(exports,"__esModule",{value:!0})});
//# sourceMappingURL=/Users/matsko/code/angular/dist/packages-dist/platform-server/bundles/platform-server.umd.min.js.map